/*! @license pzpr.js v (c) 2009-2024 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(){function a(){var e;ui.puzzle&&ui.puzzle.pid||((e=document.getElementById("title2"))&&(e.innerHTML="Fail to import puzzle data or URL."),document.getElementById("menupanel").innerHTML="")}n=o=null,s={},pzpr.on("load",function e(){var t,i;!function(){n||(n=function(){var e=location.search;if(!e)return null;"?"===e.charAt(0)&&(e=e.substr(1));for(;e.match(/^(\w+)\=(\w+)\&(.*)/);)s[RegExp.$1]=RegExp.$2,e=RegExp.$3;o=e;var t=pzpr.parser.parseURL(e),i=t.mode||(t.body?"player":"editor");return s.type=s.type||i,t}())&&n.pid||a();return 1}()?setTimeout(e,0):(t=n,ui.pzv=o,function(e){return e.match(/MSIE/)||e.match(/AppleWebKit/)&&e.match(/Edge/)}(navigator.userAgent)&&(s.graphic="canvas"),i=document.getElementById("divques"),i=ui.puzzle=new pzpr.Puzzle(i,s),pzpr.connectKeyEvents(i),ui.event.onload_func(s),i.once("fail-open",a),i.open(t),void 0!==s.variant&&i.config.set("variant",!0),i.on("request-aux-editor",ui.auxeditor.open),s.net&&ui.network.configure(s.net,s.key))});var o,n,s,l,u=document;function d(e){return u.getElementById(e)}function r(e){return u.createElement(e)}window.ui={version:"",puzzle:null,currentpid:"",event:null,menuconfig:null,urlconfig:null,menuarea:null,toolarea:null,popupmgr:null,keypopup:null,timer:null,network:null,enableGetText:!1,enableReadText:!1,reader:null,enableSaveImage:!1,enableImageType:{},enableSaveBlob:!1,callbackComplete:null,displayAll:function(){ui.menuarea.display(),ui.toolarea.display(),ui.popupmgr.translate(),ui.misc.displayDesign()},setdisplay:function(e){ui.menuarea.setdisplay(e),ui.toolarea.setdisplay(e)},customAttr:function(e,t){var i="";if(void 0!==e.dataset)i=e.dataset[t];else{for(var a="data-",o=0;o<t.length;o++){var n=t[o]||t.charAt(o);a+="A"<=n&&n<="Z"?"-"+n.toLowerCase():n}i=e[a]||e.getAttribute(a)||""}return i},windowWidth:function(){return void 0!==window.innerHeight?window.innerWidth:u.body.clientWidth},adjustcellsize:function(){var e,t,i=ui.puzzle,a=i.painter,o=a.getCanvasCols()+2*ui.getBoardPadding(),n=ui.windowWidth()-(ui.urlconfig.embed?0:6),s=ui.menuconfig,l=s.get("cellsizeval")*a.cellexpandratio,u=1,r=.4,p=.8,c=.96,m=[];m[0]=n*p/(l*u),m[1]=n*c/(l*u),m[2]=n*c/(l*r),s.get("fullwidth")?t=.92*(e=.98*n)/o:!s.get("adjsize")||o<m[0]?(e=n*p-4,t=l*u):o<m[1]?e=(t=l*u)*o:o<m[2]?t=(e=n*c-4)/o:e=(t=l*r)*o,a.outputImage||(d("main").style.width=(0|e)+"px",ui.urlconfig.embed&&(d("main").style.border="none")),i.setCanvasSizeByCellSize(t,!0)},getBoardPadding:function(){var e=0;switch(ui.puzzle.pid){case"firefly":case"hashikake":case"wblink":case"ichimaga":case"ichimagam":case"ichimagax":e=.3;break;case"kouchoku":case"gokigen":case"wagiri":case"creek":e=.2;break;case"slither":case"cave":case"mejilink":e=.15;break;case"kinkonkan":case"skyscrapers":case"easyasabc":case"box":e=.05;break;case"bosanowa":e=2!==ui.menuconfig.get("disptype_bosanowa")?.5:.05;break;default:e=.5}return e=ui.menuconfig.get("fullwidth")?0:e},selectStr:function(e,t){return!t||e&&"ja"===pzpr.lang?e:t},i18n:function(e){return this.selectStr(this.langs.ja[e],this.langs.en[e])},getCurrentConfigList:function(){return ui.menuconfig.getList()},initFileReadMethod:function(){"undefined"!=typeof FileReader?(this.reader=new FileReader,this.reader.onload=function(e){ui.puzzle.open(e.target.result)},this.enableReadText=!0):(this.reader=null,this.enableGetText="undefined"!=typeof FileList&&void 0!==File.prototype.getAsText)},initImageSaveMethod:function(e){var t;pzpr.Candle.enable.canvas&&u.createElement("canvas").toDataURL&&(this.enableImageType.png=!0,(t=u.createElement("canvas")).width=t.height=1,t.toDataURL("image/gif").match("image/gif")&&(this.enableImageType.gif=!0),t.toDataURL("image/jpeg").match("image/jpeg")&&(this.enableImageType.jpeg=!0),t.toDataURL("image/webp").match("image/webp")&&(this.enableImageType.webp=!0)),pzpr.Candle.enable.svg&&window.btoa&&(this.enableImageType.svg=!0),(this.enableImageType.png||this.enableImageType.svg)&&(this.enableSaveImage=!0),this.enableSaveBlob=!!window.navigator.saveBlob}},ui.langs={en:{editor:"editor",beforeunload:"The board is edited.",completed:"Complete!",cancel:"Cancel",close:"Close",delete:"Delete",menu_file:"File",newboard:"New board",urlinput:"Load from URL",urloutput:"Export URL",fileopen:"Open file",filesave:"Save file as …",duplicate:"Duplicate the board",imagesave:"Save as image file",menu_edit:"Edit",adjust:"Adjust the board",turnflip:"Flip/Turn the board",menu_display:"Display",cellsize:"Cell size","cellsize.xs":"Extra small","cellsize.s":"Small","cellsize.n":"Normal","cellsize.l":"Large","cellsize.xl":"Extra large","cellsize.custom":"Set by number …",font:"Font family","font.sans":"Sans-serif","font.serif":"Serif",dispqnumbg:"Paint background of clue circles",undefcell:"Paint uninputted cells",cursor:"Show cursor",trialmarker:"Show trial markers",adjsize:"Auto size adjust",fullwidth:"Expand canvas width","toolarea.show":"Show tool area","toolarea.hide":"Hide tool area",menu_setting:"Setting",lrinvert:"Invert mouse button",use_tri:"Input type","use_tri.1":"Corner-side","use_tri.2":"Pull-to-input","use_tri.3":"One button","bgcolor.menu":"Input background color","autoerr.menu.hitori":"Show overlapped number","autoerr.menu.gokigen":"Loop slash with color",multierr:"Check multiple errors","forceallcell.menu":"Number in all cells","dirauxmark.menu":"Direction aux. mark","enline.menu":"Line between points","lattice.menu":"Check lattice point","singlenum.menu":"Single number in a region",discolor:"Disable color",mouseonly:"Enable mouse-only input",patchwork_leftaux:"Enable to input aux. lines with single click",autocheck:"Answer check","autocheck.off":"Manual","autocheck.guarded":"Automatic (guarded)","autocheck.simple":"Automatic (always)",menu_help:"Help",rules:"Rules",about:"About puzz.link",translate:"Help us translate",issues:"Bug reports and feature requests",mode:"Mode","mode.edit":"Edit mode","mode.play":"Answer mode",use:"Input Type","use.1":"L/R buttons","use.2":"One button","preset.pentominoes":"Pentominoes","preset.tetrominoes":"Tetrominoes","preset.double_tetrominoes":"Double tetrominoes","preset.copy_answer":"Copy answer to bank","preset.zero":"No pieces","preset.fleet3":"Battleships (size 3)","preset.fleet4":"Battleships (size 4)","preset.fleet5":"Battleships (size 5)",inputmode:"Input Mode","inputmode.auto":"Auto","inputmode.slide":"Slide","inputmode.shade":"Shaded cells","inputmode.unshade":"Unshaded cells","inputmode.number":"Number","inputmode.number-":"Number (rev)","inputmode.letter":"Alphabet","inputmode.letter-":"Alphabet (rev)","inputmode.quesmark":"Question marks","inputmode.quesmark-":"Question marks (rev)","inputmode.color":"Color","inputmode.color-":"Color (rev)","inputmode.symbol":"Symbol","inputmode.symbol-":"Symbol (rev)","inputmode.border":"Border","inputmode.sub-border":"Sub-border","inputmode.subline":"Aux. conn. lines","inputmode.direc":"Direction","inputmode.arrow":"Arrows","inputmode.circle-unshade":"Unshaded circles","inputmode.circle-shade":"Shaded circles","inputmode.circle-gray":"Gray circles","inputmode.goat":"Goats","inputmode.wolf":"Wolves","inputmode.moon":"Marks of moon","inputmode.sun":"Marks of sun","inputmode.empty":"Invalid cells","inputmode.ice":"Icebarns","inputmode.water":"Water hazard","inputmode.nabe":"Crocks","inputmode.box":"Boxes","inputmode.pin":"Pins","inputmode.crossdot":"Shaded dots","inputmode.ineq":"Inequality marks","inputmode.move-clue":"Move clue","inputmode.copy-answer":"Copy answer","inputmode.mark-circle":"Circles","inputmode.mark-triangle":"Triangles","inputmode.mark-rect":"Rectangles","inputmode.mark-tree":"Trees","inputmode.mark-tent":"Tents","inputmode.mark-cross":"Crosses","inputmode.undef":"Question marks","inputmode.line":"Lines","inputmode.peke":"Cross marks","inputmode.diraux":"Aux. dir. marks","inputmode.bar":"Bars","inputmode.akari":"Bulbs","inputmode.star":"Stars","inputmode.dot":"Dots","inputmode.balloon":"Balloons","inputmode.ironball":"Iron balls","inputmode.futon":"Futons","inputmode.completion":"Completion","inputmode.copycircle":"Copy circles","inputmode.copynum":"Copy nums","inputmode.copyletter":"Copy letters","inputmode.copysymbol":"Copy symbols","inputmode.dragnum+":"Drag inc. nums","inputmode.dragnum-":"Drag dec. nums","inputmode.objblank":"Aux. dots","inputmode.numexist":"Aux. circles","inputmode.numblank":"Aux. crosses","inputmode.subcircle":"Aux. circles","inputmode.subcross":"Aux. crosses","inputmode.bgcolor":"Bgcolor 1/2","inputmode.bgcolor1":"Bgcolor 1","inputmode.bgcolor2":"Bgcolor 2","inputmode.bgpaint":"Draft sketch","inputmode.clear":"Erase data","inputmode.info-line":"Check line connection","inputmode.info-blk":"Check shaded cell connection","inputmode.info-ublk":"Check unshaded cell connection","inputmode.info-room":"Check room connection","inputmode.info-road":"Check route",disptype:"Display",context_marks:"Show direction indicators","disptype_yajilin.1":"Original style","disptype_yajilin.2":"Gray background","disptype_bosanowa.1":"Original style","disptype_bosanowa.2":"Sokoban style","disptype_bosanowa.3":"Waritai style","disptype_interbd.1":"Colors","disptype_interbd.2":"Shapes","disptype_interbd.3":"Both",dispmove:"Display as object moving","bgcolor.tool":"Allow inputting background color when cell center is clicked","autocmp.number":"Grey each correct number","autocmp.room":"Paint background of each completed block","autocmp.akari":"Paint background of each illuminated block","autocmp.kouchoku":"Grey each letter which links over two segments","autocmp.border":"Grey border between different areas","autoerr.tool.hitori":"Show overlapped number as red","autoerr.tool.gokigen":"Draw loop line as red","autoerr.tool.wagiri":"Draw loop line as bold","dirauxmark.tool":"Enable to input aux mark of direction","enline.tool":"Enable to draw line only between the points","lattice.tool":"Disable drawing segment passing over a lattice point",uramashu:"Change to Ura-Mashu","singlenum.tool":"Ensure that a region has a number",singleregion:"Ensure that only one tile is shaded in each region","forceallcell.tool":"Force each cell to have a number",snakebd:"Draw border around a snake",ensquare:"Enable to force drawing squares from a clue","keypopup.tool":"Input numbers by panel","irowake.tool":"Color each line","irowake.change":"Change the line colors","irowakeblk.tool":"Color each block","irowakeblk.change":"Change the block colors",dontpassallcell:"Lines need not pass all crossings",aquarium_regions:"Water in one region must have the same surface level",country_empty:"Areas don't have to be visited",voxas_tatami:"Tatami rules (no 4-way intersections)",tren_new:"All unused cells must be connected",nuriuzu_connect:"All shaded cells must be connected",bdwalk_height:"Maximum height is unknown",pentopia_transparent:"Transparent mode (clues may be shaded)",koburin_minesweeper:"Minesweeper mode (numbers include diagonal cells)",akichi_maximum:"Maximum numbers may be reduced",magnets_anti:"Anti-Magnets (adjacent poles of different magnets must be equal)",heyapin_overlap:"Pins must overlap 2 or more regions",variant:"This puzzle uses variant rules",time:"Time:","timer.menu":"Show timer",check:"Check","check.variant":"Check base type",undo:"<-",redo:"->",ansclear:"Erase answer","ansclear.confirm":"Do you want to erase the answer?",subclear:"Erase aux. marks","subclear.confirm":"Do you want to erase the auxiliary marks?","auxdelete.confirm":"Do you want to delete this piece?",encolorall:"Color up",flushexcell:"Flush clues",applypreset:"Replace bank","applypreset.title":"Replace bank","applypreset.submit":"Replace",dropblocks:"Drop blocks",outlineshaded:"Outline shaded cells",enterTrial:"Trial mode",acceptTrial:"Accept trial",rejectTrial:"Reject trial",enterFurtherTrial:"Enter further trial","newboard.title":"New Board","newboard.header":"Create New Board.","newboard.cols":"Cols","newboard.tawa.width":"Width (Yellows)","newboard.rows":"Rows","newboard.tawa.height":"Height","newboard.preset":"Preset","newboard.submit":"Create","urlinput.title":"Load from URL","urlinput.submit":"Load","urloutput.title":"Export URL","urloutput.kanpen":"Change to Kanpen URL","urloutput.heyaapp":"Change to Heyawake-Applet URL","urloutput.pzprv3e":"Change to PUZ-PRE v3 Re-Edit URL","fileopen.title":"Open File","fileopen.choose":"Choose file","filesave.title":"Save File","filesave.format":"File format","filesave.format.pzprv3":"Puz-Pre v3 format","filesave.format.penciltxt":"Pencilbox Text format","filesave.format.pencilxml":"Pencilbox XML format","filesave.filename":"Filename","filesave.submit":"Save","filesave.invalid":"The filename contains invalid characters.","imagesave.title":"Save Image","imagesave.filetype":"File format","imagesave.png":"PNG Format","imagesave.svg":"Vector Image (SVG)","imagesave.gif":"GIF Format","imagesave.jpeg":"jpeg Format","imagesave.webp":"webp Format","imagesave.filename":"Filename","imagesave.cellsize":"Image Size","imagesave.transparent":"Set background to transparent","imagesave.bank":"Include piece bank","imagesave.saveimage":"Download","imagesave.openimage":"Open in another window","imagesave.error":"Fail to Output the Image","adjust.title":"Board Dimension Resizer","adjust.header":"Adjust the board.","adjust.expand":"Expand","adjust.reduce":"Reduce","adjust.up":"Top","adjust.dn":"Bottom","adjust.lt":"Left","adjust.rt":"Right","turnflip.title":"Flip/Turn the board","turnflip.header":"Flip/Turn the board.","turnflip.turnl":"Turn left by 90 degree","turnflip.turnr":"Turn right by 90 degree","turnflip.flipy":"Flip upside down","turnflip.flipx":"Flip leftside right","turnflip.turnl.short":"↶","turnflip.turnr.short":"↷","turnflip.flipy.short":"⇅","turnflip.flipx.short":"⇄","dispsize.title":"Change size","dispsize.header":"Change the display size.","dispsize.cellsize":"Display size","dispsize.submit":"Change","about.title":"About puzz.link","about.pzv":"PUZ-PRE v3","about.author":"happa","network.title":"Network play","network.start":"Start","network.share":"Share this link to play with someone:","list.sort.date":"Sort by date","list.sort.alpha":"Sort alphabetically"},ja:{editor:"エディタ",beforeunload:"盤面が更新されています。",completed:"正解です！",cancel:"キャンセル",close:"閉じる",delete:"削除",menu_file:"ファイル",newboard:"新規作成",urlinput:"URL入力",urloutput:"URL出力",fileopen:"ファイルを開く",filesave:"ファイル保存…",duplicate:"盤面の複製",imagesave:"画像を保存",menu_edit:"編集",adjust:"盤面の調整",turnflip:"反転・回転",menu_display:"表示",cellsize:"表示サイズ","cellsize.xs":"サイズ 極小","cellsize.s":"サイズ 小","cellsize.n":"サイズ 標準","cellsize.l":"サイズ 大","cellsize.xl":"サイズ 特大","cellsize.custom":"数値指定…",font:"フォント","font.sans":"ゴシック","font.serif":"明朝",dispqnumbg:"問題背景描画",undefcell:"未確定領域背景描画",cursor:"カーソルの表示",trialmarker:"仮置きマーカーの表示",adjsize:"自動横幅調節",fullwidth:"横幅最大拡張","toolarea.show":"ツールエリアを表示","toolarea.hide":"ツールエリアを隠す",menu_setting:"設定",lrinvert:"マウス左右反転",use_tri:"操作方法","use_tri.1":"クリックした位置","use_tri.2":"引っ張り入力","use_tri.3":"1ボタン","bgcolor.menu":"背景色入力","autoerr.menu.hitori":"重複した数字を表示","autoerr.menu.gokigen":"ループした斜線の色分け",multierr:"複数エラー検出","forceallcell.menu":"全マス数字必須","dirauxmark.menu":"方向の補助記号","enline.menu":"点を結ぶ線","lattice.menu":"格子点チェック","singlenum.menu":"領域に数字1つ",discolor:"色分け無効化",mouseonly:"マウス入力モードにする",autocheck:"正答判定","autocheck.off":"正答を自動で判定しない","autocheck.guarded":"自動(guarded)","autocheck.simple":"自動(常に)",menu_help:"ヘルプ",rules:"ルール",about:"puzz.linkについて",translate:"翻訳支援(Weblate)",issues:"バグレポートと機能リクエスト",mode:"モード","mode.edit":"問題入力モード","mode.play":"解答モード",use:"操作方法","use.1":"左右ボタン","use.2":"1ボタン","preset.pentominoes":"ペントミノ","preset.tetrominoes":"テトロミノ","preset.double_tetrominoes":"テトロミノ2つずつ","preset.copy_answer":"回答にあるものすべて","preset.zero":"ブロックなし",inputmode:"入力モード","inputmode.auto":"自動","inputmode.slide":"平行移動","inputmode.shade":"黒マス","inputmode.unshade":"白マス","inputmode.number":"数字","inputmode.number-":"数字(逆順)","inputmode.letter":"アルファベット","inputmode.letter-":"アルファベット(逆順)","inputmode.quesmark":"盤面記号","inputmode.quesmark-":"盤面記号(逆順)","inputmode.color":"色","inputmode.color-":"色(逆順)","inputmode.border":"境界線","inputmode.sub-border":"境界線(細線)","inputmode.subline":"補助線","inputmode.direc":"向き","inputmode.arrow":"矢印","inputmode.circle-unshade":"白まる","inputmode.circle-shade":"黒まる","inputmode.circle-gray":"灰まる","inputmode.goat":"ヤギ","inputmode.wolf":"オオカミ","inputmode.moon":"月","inputmode.sun":"太陽","inputmode.empty":"無効セル","inputmode.ice":"アイスバーン","inputmode.water":"ウォーターハザード","inputmode.nabe":"鍋","inputmode.box":"箱","inputmode.pin":"Pins","inputmode.crossdot":"黒点","inputmode.ineq":"不等号","inputmode.move-clue":"図形の移動","inputmode.copy-answer":"解答モードから記号作成","inputmode.mark-circle":"丸記号","inputmode.mark-triangle":"三角形","inputmode.mark-rect":"四角形","inputmode.mark-tree":"木","inputmode.mark-tent":"テント","inputmode.mark-cross":"バツ印","inputmode.undef":"？記号","inputmode.line":"線","inputmode.peke":"バツ印","inputmode.diraux":"線の向き補助記号","inputmode.bar":"線","inputmode.akari":"あかり","inputmode.star":"スター","inputmode.dot":"黒点","inputmode.balloon":"風船","inputmode.ironball":"鉄球","inputmode.futon":"ふとん","inputmode.completion":"確定数字","inputmode.copycircle":"コピー","inputmode.copynum":"コピー","inputmode.copyletter":"コピー","inputmode.dragnum+":"数字を増やしてコピー","inputmode.dragnum-":"数字を減らしてコピー","inputmode.objblank":"ドット","inputmode.numexist":"数字あり補助記号","inputmode.numblank":"数字なし補助記号","inputmode.subcircle":"補助丸記号","inputmode.subcross":"補助バツ記号","inputmode.bgcolor":"背景色1/2","inputmode.bgcolor1":"背景色1","inputmode.bgcolor2":"背景色2","inputmode.bgpaint":"下絵","inputmode.clear":"消去","inputmode.info-line":"線の繋がりチェック","inputmode.info-blk":"黒マス繋がりチェック","inputmode.info-ublk":"白マス繋がりチェック","inputmode.info-room":"へやの繋がりチェック","inputmode.info-road":"経路チェック",disptype:"表示形式",context_marks:"矢印を表示する","disptype_yajilin.1":"ニコリ紙面形式","disptype_yajilin.2":"背景色をグレーにする","disptype_bosanowa.1":"ニコリ紙面形式","disptype_bosanowa.2":"倉庫番形式","disptype_bosanowa.3":"ワリタイ形式","disptype_interbd.1":"色","disptype_interbd.2":"形","disptype_interbd.3":"色と形",dispmove:"動かしたように描画を行う","bgcolor.tool":"セルの中央をクリックした時に背景色の入力を有効にする","autocmp.number":"正しい数字をグレーにする","autocmp.room":"条件を満たした領域に背景色をつける","autocmp.akari":"光の照らす領域に背景色をつける","autocmp.kouchoku":"線が2本以上になったら点をグレーにする","autocmp.border":"異なる数字の間にグレーの境界線を引く","autoerr.tool.hitori":"重複している数字を赤くする","autoerr.tool.gokigen":"ループになっている斜線を赤くする","autoerr.tool.wagiri":"ループになっている斜線を太くする","dirauxmark.tool":"方向を表す補助記号を入力する","enline.tool":"点の間のみ線を引けるようにする","lattice.tool":"点を通過する線を引けないようにする",uramashu:"裏ましゅにする","singlenum.tool":"領域に一つだけ数字を入力できるようにする",singleregion:"各領域で黒く塗れるタイルを1つだけにする","forceallcell.tool":"全てのマスに数字が入った場合のみ正解とする",ensquare:"黒丸がある場所からだけ正方形を描けるようにする",snakebd:"へびの周りに境界線を表示する","keypopup.tool":"数字・記号をパネルで入力する","irowake.tool":"線の色分けをする","irowake.change":"色分けしなおす","irowakeblk.tool":"黒マスの色分けをする","irowakeblk.change":"色分けしなおす",dontpassallcell:"線が全ての交差点を通過していない場合も正解とする",aquarium_regions:"同一領域内の水面の高さがすべて等しい場合のみ正解とする",country_empty:"線が全く通らない国があっても正解とする",voxas_tatami:"タタミルール(境界の十字交差禁止)",tren_new:"白マスひとつながりルールを追加",nuriuzu_connect:"黒マスひとつながりルールを追加",bdwalk_height:"盤面にある数字より大きい階数があってもよい",pentopia_transparent:"Transparent (矢印のマスが黒マスになる場合もあります。)",koburin_minesweeper:"マインスイーパモード (数字は斜めのマスを含みます)",akichi_maximum:"最大値が数字より小さくても可",magnets_anti:"Anti-Magnets (磁石が必ず同じ極で隣り合う)",heyapin_overlap:"ピンは必ず複数の部屋にまたがる",variant:"変種ルール",time:"経過時間：","timer.menu":"タイマーを表示",check:"チェック","check.variant":"本家ルールでチェック",undo:"戻",redo:"進",ansclear:"解答消去","ansclear.confirm":"解答を消去しますか？",subclear:"補助消去","subclear.confirm":"補助記号を消去しますか？","auxdelete.confirm":"このブロックを削除しますか？",encolorall:"色をつける",flushexcell:"ヒントを揃える",applypreset:"ブロックの変更","applypreset.title":"ブロックの変更","applypreset.submit":"OK",dropblocks:"ブロックを落とす",enterTrial:"仮置きモード",acceptTrial:"仮置き確定",rejectTrial:"仮置き破棄",enterFurtherTrial:"多重仮置き","newboard.title":"盤面の新規作成","newboard.header":"盤面を新規作成します。","newboard.cols":"よこ","newboard.tawa.width":"横幅 (黄色の数)","newboard.rows":"たて","newboard.tawa.height":"高さ","newboard.preset":"ブロック","newboard.submit":"新規作成","urlinput.title":"URL入力","urlinput.submit":"読み込む","urloutput.title":"URL出力","urloutput.kanpen":"カンペンのURLを出力する","urloutput.heyaapp":"へやわけアプレットのURLを出力する","urloutput.pzprv3e":"ぱずぷれv3の再編集用URLを出力する","fileopen.title":"ファイルを開く","fileopen.choose":"ファイル選択","filesave.title":"ファイルを保存する","filesave.format":"ファイル形式","filesave.format.pzprv3":"ファイル形式","filesave.format.penciltxt":"pencilbox形式","filesave.format.pencilxml":"pencilbox XML形式","filesave.filename":"ファイル名","filesave.submit":"保存","filesave.invalid":"ファイル名として使用できない文字が含まれています。","imagesave.title":"画像を保存する","imagesave.filetype":"ファイル形式","imagesave.png":"PNG形式","imagesave.svg":"ベクター画像(SVG)","imagesave.gif":"GIF形式","imagesave.jpeg":"jpeg形式","imagesave.webp":"webp形式","imagesave.filename":"ファイル名","imagesave.cellsize":"画像のサイズ","imagesave.transparent":"背景色を透明にする","imagesave.bank":"ブロックを含める","imagesave.saveimage":"ダウンロード","imagesave.openimage":"別ウィンドウで開く","imagesave.error":"画像の出力に失敗しました","adjust.title":"盤面の調整","adjust.header":"盤面の調整を行います。","adjust.expand":"拡大","adjust.reduce":"縮小","adjust.up":"上","adjust.dn":"下","adjust.lt":"左","adjust.rt":"右","turnflip.title":"反転・回転","turnflip.header":"盤面の回転・反転を行います。","turnflip.turnl":"左90°回転","turnflip.turnr":"右90°回転","turnflip.flipy":"上下反転","turnflip.flipx":"左右反転","turnflip.turnl.short":"↶","turnflip.turnr.short":"↷","turnflip.flipy.short":"⇅","turnflip.flipx.short":"⇄","dispsize.title":"表示サイズの変更","dispsize.header":"表示サイズを変更します。","dispsize.cellsize":"表示サイズ","dispsize.submit":"変更する","about.title":"puzz.linkについて","about.pzv":"ぱずぷれv3","about.author":"は はっぱ/連続発破","network.title":"ネットワークプレイ","network.start":"始める","network.share":"共有用URL:","inputmode.copysymbol":"コピー","preset.fleet3":"サイズ3","preset.fleet4":"サイズ4","preset.fleet5":"サイズ5",patchwork_leftaux:"左クリックで補助線を入力する","list.sort.date":"日付順","list.sort.alpha":"アルファベット順"}},ui.event={resizetimer:null,visibilitystate:null,visibilityCallbacks:[],removers:[],addEvent:function(e,t,i,a,o){this.removers.push(pzpr.util.addEvent(e,t,i,a,!!o))},removeAllEvents:function(){this.removers.forEach(function(e){e()}),this.removers=[]},addVisibilityCallback:function(e){"visible"===this.visibilitystate?e():this.visibilityCallbacks.push(e)},setWindowEvents:function(){ui.reader&&(this.addEvent(window,"dragover",this,function(e){e.preventDefault()},!0),this.addEvent(window,"drop",this,function(e){ui.reader.readAsText(e.dataTransfer.files[0]),e.preventDefault(),e.stopPropagation()},!0)),this.addEvent(u,"blur",this,this.onblur_func);var e=pzpr.env.OS.iOS?"orientationchange":"resize";this.addEvent(window,e,this,this.onresize_func),this.addEvent(window,"beforeunload",this,this.onbeforeunload_func),this.addEvent(window,"unload",this,this.onunload_func),matchMedia&&matchMedia("(resolution: 1dppx)").addListener(this.onpixelratiochange_func)},setDocumentEvents:function(){this.addEvent(document,"visibilitychange",this,this.onvisibilitychange_func),this.onvisibilitychange_func()},onload_func:function(e){ui.initFileReadMethod(),ui.urlconfig.init(e),ui.menuconfig.restore(),ui.listener.setListeners(ui.puzzle),pzpr.env.OS.Android&&ui.misc.modifyCSS({"body, .btn":{fontFamily:"Verdana, Arial, sans-serif"}})},onunload_func:function(){ui.menuconfig.save()},onresize_func:function(){this.resizetimer&&clearTimeout(this.resizetimer),this.resizetimer=setTimeout(function(){ui.adjustcellsize()},250)},onblur_func:function(){ui.puzzle.key.keyreset(),ui.puzzle.mouse.mousereset()},onbeforeunload_func:function(e){var t;if(!ui.puzzle.playeronly&&ui.puzzle.ismodified())return t=ui.i18n("beforeunload"),e.returnValue=t},onvisibilitychange_func:function(e){var t=document.visibilityState;if(t!==this.visibilitystate&&"visible"===(this.visibilitystate=t)){for(var i=0;i<this.visibilityCallbacks.length;i++)this.visibilityCallbacks[i]();this.visibilityCallbacks=[]}},onpixelratiochange_func:function(e){ui.puzzle.redraw(!0)}},ui.listener={setListeners:function(e){e.once("ready",this.onFirstReady),e.on("ready",this.onReady),e.on("key",this.onKeyInput),e.on("mouse",this.onMouseInput),e.on("history",this.onHistoryChange),e.on("trial",this.onTrialModeChange),e.on("mode",this.onModeChange),e.on("adjust",this.onAdjust),e.on("resize",this.onResize),e.on("cellop",this.onCellOp)},onFirstReady:function(e){ui.initImageSaveMethod(e),ui.timer.init()},onReady:function(e){ui.currentpid!==e.pid&&(ui.event.removeAllEvents(),ui.keypopup.create(),ui.menuarea.reset(),ui.toolarea.reset(),ui.popupmgr.reset(),ui.notify.reset(),ui.misc.displayDesign(),ui.event.setWindowEvents(),ui.event.setDocumentEvents()),ui.menuconfig.sync(),ui.menuconfig.set("autocheck_once","off"!==ui.menuconfig.get("autocheck_mode")&&ui.puzzle.playeronly),ui.currentpid=e.pid,ui.adjustcellsize(),ui.keypopup.display(),ui.event.addVisibilityCallback(function(){ui.timer.start()}),ui.network.start()},onKeyInput:function(e,t){var i=e.key,a=ui.undotimer,o=!0;i.keydown?("ctrl+z"!==t&&"meta+z"!==t||(a.startUndo(),o=!1),"ctrl+y"!==t&&"meta+y"!==t||(a.startRedo(),o=!1),e.playeronly||(e.editmode&&"F2"===t?(ui.menuconfig.set("mode",e.MODE_PLAYER),o=!1):e.playmode&&"shift+F2"===t&&(ui.menuconfig.set("mode",e.MODE_EDITOR),o=!1))):i.keyup&&a.stop(),i.cancelEvent=!o},onMouseInput:function(e){var t=e.mouse,i=!0;t.mousestart&&"middle"===t.btn&&(ui.menuconfig.set("mode",e.playmode?"edit":"play"),t.mousereset(),i=!1),t.cancelEvent=!i},onHistoryChange:function(e){ui.currentpid&&ui.setdisplay("operation")},onTrialModeChange:function(e,t){ui.currentpid&&ui.setdisplay("trialmode")},onModeChange:function(e){for(var t in ui.menuconfig.list.mode.val=ui.puzzle.playmode?"play":"edit",ui.setdisplay("mode"),ui.menuconfig.set("inputmode",ui.puzzle.mouse.inputMode),ui.setdisplay("keypopup"),ui.setdisplay("bgcolor"),ui.setdisplay("mouseonly"),ui.puzzle.config.getVariants())ui.setdisplay(t);ui.keypopup.display()},onAdjust:function(e){ui.adjustcellsize()},onResize:function(e){var t=e.painter,t=Math.min(t.cw,t.ch),i=ui.getBoardPadding()*t|0,a=i;"starbattle"!==e.pid&&"easyasabc"!==e.pid||(a=(.05*t|0)+"px"),e.canvas.parentNode.style.padding=i+"px",e.canvas.parentNode.style.paddingTop=a+"px",ui.keypopup.resizepanel()},onCellOp:function(e,t){ui.network.onCellOp(t)}},l=pzpr.Puzzle.prototype.Config.prototype,ui.menuconfig={list:null,puzzle:null,init:function(){for(var e in this.list={},this.add("autocheck_mode","simple",{option:["off","simple","guarded"]}),this.add("autocheck_once",ui.puzzle.playeronly,{volatile:!0}),this.add("keypopup",!1),this.add("adjsize",!0),this.add("cellsizeval",ui.windowWidth()<=960?36:48),this.add("fullwidth",ui.windowWidth()<600),this.add("toolarea",!0),this.add("inputmode","auto",{volatile:!0}),this.add("auxeditor_inputmode","auto",{volatile:!0}),this.add("lrinvert",!1,{volatile:!0}),this.add("language",pzpr.lang,{option:["en","ja"]}),this.puzzle=ui.puzzle,ui.puzzle.config.list){var t,i=ui.puzzle.config.list[e],a={puzzle:!0};for(t in i.extoption)a[t]=i[t];this.add(e,i.defval,a)}this.add("mode",ui.puzzle.playmode?"play":"edit",{option:["edit","play"],puzzle:!0})},add:function(e,t,i){l.add.call(this,e,t,i),i&&i.puzzle&&((t=this.list[e]).volatile=t.puzzle=!0)},sync:function(){var e,t=this.isDirty,i=[];switch(ui.puzzle.pid){case"yajilin":case"lixloop":i="disptype_yajilin";break;case"bosanowa":i="disptype_bosanowa";break;case"interbd":i="disptype_interbd";break;case"arukone":i="dontpassallcell";break;case"aquarium":i="aquarium_regions";break;case"country":i="country_empty";break;case"voxas":i="voxas_tatami";break;case"tren":case"news":i="tren_new";break;case"nuriuzu":i="nuriuzu_connect";break;case"pentopia":i="pentopia_transparent";break;case"koburin":i=["disptype_yajilin","koburin_minesweeper"];break;case"akichi":i="akichi_maximum";break;case"magnets":i="magnets_anti";break;case"context":i="context_marks";break;case"heyapin":i="heyapin_overlap";break;case"bdwalk":i="bdwalk_height"}for(e in i="string"==typeof i?[i]:i)this.set(i[e],ui.puzzle.getConfig(i[e]));this.set("variant",ui.puzzle.getConfig("variant")),this.set("lrinvert",ui.puzzle.mouse.inversion),this.set("autocmp",ui.puzzle.getConfig("autocmp")),this.set("autoerr",ui.puzzle.getConfig("autoerr")),this.isDirty=t},getCurrentName:l.getCurrentName,getNormalizedName:l.getNormalizedName,get:l.get,set:function(e,t){var i=this.getNormalizedName(e),a=i.name;this.list[a]&&("mode"!==a&&"inputmode"!==a||ui.auxeditor.close(),"mode"===a?(ui.puzzle.setMode(t),t=ui.puzzle.playmode?"play":"edit"):"inputmode"===a?(ui.puzzle.mouse.setInputMode(t),t=ui.puzzle.mouse.inputMode):"auxeditor_inputmode"===a&&(ui.auxeditor.puzzle.mouse.setInputMode(t),t=ui.auxeditor.puzzle.mouse.inputMode),t=this.setproper(i,t),"language"===a?pzpr.lang=t:this.list[a].puzzle&&ui.puzzle.setConfig(e,t),this.list[a].volatile&&(!ui.puzzle.config.list[e]||ui.puzzle.config.list[e].volatile)||(this.isDirty=!0),this.configevent(a,t))},reset:l.reset,restore:function(){ui.puzzle.config.init(),this.init();var e=localStorage.getItem("pzprv3_config:puzzle"),t=localStorage.getItem("pzprv3_config:ui");e&&this.setAll(JSON.parse(e)),t&&this.setAll(JSON.parse(t)),this.isDirty=!1},isDirty:!1,save:function(){if(this.isDirty){try{localStorage.setItem("pzprv3_config:puzzle",JSON.stringify(ui.puzzle.saveConfig())),localStorage.setItem("pzprv3_config:ui",JSON.stringify(this.getAll()))}catch(e){console.warn(e)}this.isDirty=!1}},getList:l.getList,getexec:function(e){return!!this.list[e]&&("mode"===e?!ui.puzzle.playeronly:!this.list[e].puzzle||ui.puzzle.validConfig(e))},getAll:l.getAll,setAll:function(e){for(var t in e)this.set(t,e[t]);this.list.autocheck_once.val="off"!==this.list.autocheck_mode.val},setproper:l.setproper,valid:function(e){return!!this.list[e]&&("keypopup"===e?0!==ui.keypopup.paneltype[1]||0!==ui.keypopup.paneltype[3]:"mode"===e?!ui.puzzle.playeronly:"timer"===e?ui.puzzle.playeronly:"inputmode"===e?1<ui.puzzle.mouse.getInputModeList("play").length||!ui.puzzle.playeronly&&1<ui.puzzle.mouse.getInputModeList("edit").length:"autocheck_mode"===e||"autocheck_once"===e?ui.puzzle.playeronly&&!ui.puzzle.getConfig("variant"):!this.list[e].puzzle||ui.puzzle.validConfig(e))},configevent:function(e,t){if(ui.menuarea.menuitem)switch(ui.setdisplay(e),e){case"keypopup":ui.keypopup.display();break;case"adjsize":case"cellsizeval":case"fullwidth":ui.adjustcellsize();break;case"autocheck_mode":this.list.autocheck_once.val="off"!==t;break;case"timer":ui.toolarea.display();break;case"language":ui.displayAll();break;case"lrinvert":ui.puzzle.mouse.setInversion(t)}}},ui.urlconfig={embed:!1,init:function(e){"yes"===e.embed&&(this.embed=!0)}},ui.misc={displayDesign:function(){var e=ui.puzzle.pid,t=pzpr.variety(e),t=ui.selectStr(t.ja,t.en);t+=ui.puzzle.playeronly?" player":" "+ui.i18n("editor"),u.title=t,u.getElementById("title2").innerHTML=t,ui.urlconfig.embed?u.body.style.background="white":u.body.style.backgroundImage="url("+this.bgimage(e)+")"},bgimage:function(e){return 0<=["akichi","alter","angleloop","aquapelago","aquarium","araf","skyscrapers","balance","battleship","bdwalk","brownies","castle","cbanana","chainedb","circlesquare","cocktail","coffeemilk","compass","coral","cts","curvedata","dbchoco","detour","dominion","doppelblock","dotchi","doubleback","easyasabc","evolmino","genderwalk","geradeweg","heteromino","heyapin","icewalk","invlitso","ladders","lixloop","kaidan","kaisu","kissing","kropki","kuroclone","lollipops","magnets","mannequin","martini","maxi","midloop","mirrorbk","moonsun","mrtile","mukkonn","nanameguri","nondango","nonogram","norinuri","nurimisaki","nuriuzu","nothing","oneroom","ovotovata","oyakodori","patchwork","pencils","pentatouch","pentopia","pmemory","portal","ququ","rassi","remlen","retroships","roundtrip","sashikazune","satogaeri","scrin","simplegako","simpleloop","slashpack","snake","squarejam","starbattle","statuepark","subomino","wafusuma","symmarea","tachibk","tajmahal","takoyaki","tapaloop","tents","teri","tetrochain","tetrominous","tontonbeya","trainstations","tslither","voxas","vslither","walllogic","waterwalk","wittgen","yinyang"].indexOf(e)?"img/"+e+".png":"data:image/gif;base64,"+((e=(e={aho:["ICAgKCgoC","I4Qdp3vJDxwMtNorV85sQ6RwWhhiZPNF57Q+3udgcjWmLVMAADs="],amibo:["P/AwP///y","HoRjqQvI36AKtNrrolx5Hz+BXjeKX4KlVWmSmyt1BQA7"],ayeheya:["P/ow////y","F4SPGJEN66KctNoGaZ5b9guGIsdoZVUAADs="],cave:["P+vg///wC","JYRjl4DbmlqYtNr3mFs67g+FYiZd5uSlYjdyJNim56mytv3CeQEAOw=="],barns:["MDAwID//y","JQyCqZa369hTDtg7cYxT+r51zUVyWSMiYbqKJZl65tOCqDHjZQEAOw=="],bdblock:["Dn/pP///y","IoyPqQHb+lJE81RzmdsMeI994EKWJsVJKQqtlouFovydSgEAOw=="],bonsan:["P//wMD/wC","JoSPicGqcWCSgBpbJWa81zlR4hNizomeHMh+1wZ2MtssrTmmmVQAADs="],box:["ICAgKCgoC","IgyOCaadxpyKEkHqKH5tLxmEondg5MeBU2WyKziGakfPRwEAOw=="],cbblock:["P/QQf///y","H4wDp3vJj+BzUlEIst784rp4lSiRH9igKdNpk2qYRwEAOw=="],chocona:["P/AwP///y","IIyPGcDtD1BUM1WpVr6HG69R2yiWFnmamNqh0Ntk8iwXADs="],cojun:["MD//////y","I4wfgMvKD+Jrcp6IrcF18ux9DiWOSNldaJqspgu28AZndVYAADs="],country:["P/Gif///y","IISPGZFtDKB7SDZL78RYna6BjhhO1WdG3siubWZC5FkAADs="],creek:["AD//8H+/y","JIQfGces2tyD8RkrU16XboBVExd1YTmSjXWa5NlirTsjU/k1BQA7"],factors:["AD//////y","IISPqcsWHxp4iKq4cGXayd5dWwN+SXigqHeBawpJ8pwUADs="],fillmat:["P//wLP/gS","JoSDAam2yh6SM9pbE4UaT3d0HrWRmDOiXMZ+oLfG5cjIMAnOIlsAADs="],fillomino:["ODg4P///y","I4QPgcvKn4KU0DhbE7qP3wl608FtDVRq3bkuYZillYxmLlQAADs="],firefly:["ID/gP//wC","JISDpqvRzNySME2EMaAHzuddXEiWlVVSYxRl7riCsqeaG2orBQA7"],fivecells:["MD/wP///y","IwyOmWbqDaCLCgY7T5NT8vV02fdpYpVRSAmqZ4S145rS7FMAADs="],fourcells:["MD/wP///y","JoSPELeZrdxjoUJbmTYQ3T1xoEdh1gh+jhqtaZlxGOqK0nvL5o4VADs="],goishi:["P/zwf///y","JoSPiRHK2UA0cU5JVz5V79stFzUq5oly5eOBG8a9sAu/4QetZXoUADs="],gokigen:["OD/g////y","HYQPgafbvlKUMD42r9HbZg9W4oh9IdmZaLpSLZcUADs="],hakoiri:["MD//////y","KISPicEa+UyUYE5KLcSVY81FVyc1JYMq6oKm6zgu2zur8Eoesd6aSgEAOw=="],hanare:["AD//////y","FYSPqcvtDyMMdNLqLm46WC+F4kgmBQA7"],hashikake:["P///8DAwC","JoQflse829qLMlhLVYQuw8s5F+JtpTJSIKm2UgaAGBxrdI3TU1MAADs="],hebi:["ID/gMD/wC","FISPqcvtD1WYtM6Is96825pcHVQAADs="],herugolf:["MD//+H//y","I4SPiRHqwJ6KcrV6KIbXdqNlITeNo3Q+zMo67Ou+ayx/G1IAADs="],heyabon:["P//wMD/wC","LYyPacDtH9p5LgJ7IYt4V559Clh9Idad0kJ57caimmex7nqNUN2lti8JvSaAAgA7"],heyawake:["MD/wP///y","F4SPGJEN66KctNoGaZ5b9guGIsdoZVUAADs="],hitori:["P//QP///y","H4SPFhvpwNpDcVJ2lz11Q+x1HgduonVOZ/qwjpvASAEAOw=="],icebarn:["EH9/////y","F4SPqcvt3wJEcpp6g95cW/yAjmiV5nkWADs="],icelom:["EH9/////y","GYSPqcvdAYOblMl1UU7b9PN9XkWSkVimaQEAOw=="],icelom2:["H///////y","G4SPqcvNEQxsMVX71MWue7SBWjZyywSg38o2BQA7"],ichimaga:["ODg4P///y","IIyPGcDtfZ4EUdmLzWRxQ+1kovh0HgVO42qhy+nCHBsUADs="],ichimagam:["ODg4P///y","F4yPGcDtD6NTtFojs3639w1m3kiW5lUAADs="],ichimagax:["ODg4P///y","HkSOicDtDyNUtNHKltzcXXsloNKVm2aEqHqYbsQuBQA7"],juosan:["Pjzu9/bqC","H4SPEMm43R5MUoWLZZ1mcz+BIDRGHHU6ToYdJfOiZwEAOw=="],kaero:["P/A/////y","KIyPecDtbUB4dE5JIbtSxa1VISaC5sOlmXo6LImOnCt77BxjuPhlbgEAOw=="],kazunori:["KD/wND/4C","IwyOqaaN7BqMKdiL86xU9vVx4bEtFklBRglcj4a1T0qe9AgUADs="],kakuro:["ICAgP///y","F4SPqcut4V5McJ5qAbZ79vg5YTNmZlYAADs="],kakuru:["MD/wP///y","HYSPqcut4QA8c1Vq2ZWu7vxpERYmXmeKz6oaJVUAADs="],kinkonkan:["P//gP///y","JoSDAanmrKBbsDaL7ctoUuwdjBhSWxdyHod+bObCZyetiVuOo1MAADs="],kouchoku:["ODg4P///y","IIwDp3vJbxxccqraMKK6xX4BYDh+0SRSTLparevBsVwVADs="],kramma:["ID/gMD/wC","IISPGJFt6xqMitEzL8hv+Q+G4idZGkehkeqwpdbBj7wVADs="],kramman:["ID/gMD/wC","GYSPqcvtj4IMb85mbcy8+7xxGOho0ImmaQEAOw=="],kurochute:["PDw8ODg4C","IYSPFpGty9yBUD5qb9QVrER1GTaSUvWdadqILCKW2UzTBQA7"],kurodoko:["ICAgMDAwC","H4SPiRHqDaAzMk66Lraa1g6GIhNCn1Kd2aGubUKKSAEAOw=="],kurotto:["MDAwODg4C","KYxvoKuIzNKSD8gWMM2T12t5h+ZAncOZaoiu6LZFYtyRmGyHuPqmUF8AADs="],kusabi:["MD/wP///y","I4SPqZvh/06QaxoLMMK80uuBYvaRY3eWW6mxqjuuJwQx9r0UADs="],lightup:["MD//////y","IIRvgcvKDxycNAY5r6a6I99t2xdijVeN1bqYHJvA0VMAADs="],lits:["ICAgKCgoC","IYQRqXmNq9yBUT7alr1wU2Z9gfeRWFiip6RNKfs6otkdBQA7"],lookair:["AD//6D//y","GoSPqcsa/5qBUdIgwc07+w92jciQi+lQYFYAADs="],loopsp:["P+AgP/Pgy","KYwPeLtpzoCcVDb1Mg7QQb55T9VVGrOBaPqhHomY6iyG2EfCa7dep1EAADs="],loute:["IH/gf///y","IYyPaaDB+lJE89TVrssZ+Ph5zUiWG8ShqpSyK9V9Vmg2BQA7"],makaro:["NnZ2e3t7S","I0xgmYDqytpzUa6K7cl1wuh9lnZ93siEompwoOhSHTuz26kUADs="],mashu:["P/AwP///y","JoR/kRntvYxCFExb6b0ZS/Y4kdeRXLaVViqFJ1vCndw+oziP+QcUADs="],mejilink:["NDQ0P///y","JoxheZrI4VhUE9iLc5ztQc8tz9ZBpPiN4Kq2hwZbpcTS7lk1zlYAADs="],minarism:["AD//4H+/y","HYyPqcutAKN8DNBlU75oa/6FoOF141EG0po67vsWADs="],mochikoro:["AAAAICAgC","IYwDqXmNq9yBUT7alr1wU2Z9gPeRWFiip6RNKfs6otkdBQA7"],mochinyoro:["MDAwKCgoC","FoSPqct9AaOctNqLs4au+29s4kiWUwEAOw=="],nagare:["N/Z/+7r/y","H4SPEJtt7FqItFo678t3ceWF4iGWIWim6sqirbtubQEAOw=="],nagenawa:["ACAgACeoC","JYSPacHdCgKUiiaL8NFrO7eF3RiJJWml5geS2QRX8TWxDITnegEAOw=="],nanro:["MD//+H//y","IIQfGcet2+KLUlFnL8rs+Q+G4khOWKJtaAqYqavBlwwUADs="],nawabari:["MD//////y","IwRihsnK2xI88dnqJM68zhl9G6V5wYmmagc24vZisavWKYsVADs="],norinori:["P/d1MDAwC","I4QfGcet2+KLUlFn8USvJ+Z5YLgZogZdZqYCpfpeMTVXX1MAADs="],numlin:["MDAwP///y","JYyBaJG6Cx6UhzIbacuszaphYkhKG+SVD7eOJpZ2yXepdGuDRgEAOw=="],nuribou:["KCgoICAgC","JYQRGYfKug58TlYzbaJbR3w1HTiKn8mdGamGK+ql6Uu7dlnjYQEAOw=="],nurikabe:["P+hof/R0S","FoSPqcvtD1eY1NHa7rSaX49F4kiWTAEAOw=="],nurimaze:["MD/wP/0/y","I4Qfp4u8aYKcs0WnINBYc+dRlIVtZHeCiMh6JfO9MSitbTwbBQA7"],paintarea:["P//wMD/wC","JowDCYfKug58TlYzbaJbR3w1HTiKn8lBZ5oxpOp6rTurIXvL+TsXADs="],pipelink:["ID/gM//gy","Kkxgqae4bYCcjs6YaoaY9a99BxWRz4mmi1VeW+d44Px6cWXhrHzG/OMoAAA7"],pipelinkr:["ID//8D//y","Kkxgqae4bYCcjs6YaoaY9a99BxWRz4mmi1VeW+d44Px6cWXhrHzG/OMoAAA7"],rectslider:["MDAwODg4C","IIxvoKuIzNyBa1Jqb5RB8359mseRkumMG6gCGSSGpSwVADs="],reflect:["MDAwP///y","HoyPqcvtCMAzMb5aWw5YbfpxVtKJEoONWrhO7gsnBQA7"],renban:["ID/gP//wC","JoRjeZrI4FhUM9h7F4yzPfh1mkRp2MmF6iOCLIVaZvrWpF16bnwVADs="],ringring:["KCgoMDAwC","JwRiqae4bYKctDr3Isw63dp1VsgcYCmeWDmirLpx6/p81n1xJL04BQA7"],ripple:["AD//////y","IIyBYJG6jRg8sNqLs97RyvZMnxNGo3liKce2XkuBVVAAADs="],roma:["P/wwf///y","IoSPqXvBGtxrcZpYJ85sc+hJYLiE2Ggm5oas7OWeQMzSWwEAOw=="],sashigane:["IH/gf///y","HYyPqcsBrcBrskp4LjZz+79p2NQxZRkhaOp4IhgUADs="],shakashaka:["AAAAICAgC","IoSPqRe7AR2CVAKKHd5q++l9VxgaJMecTXJqoltZ4ypfSwEAOw=="],shikaku:["ICAgMDAwC","HoSPGcm43YKctMoIcVab9/N8QPiRjoVe4riyq7kFBQA7"],shimaguni:["P//wMD/wC","G4yPqavgDx2KFMwKL5as+w+GBqVtJXZWqcgeBQA7"],shugaku:["AAAQAAAgC","JoRvoauIzNyBSyYaXp37Nv55GTiKGnWWQESmbguLrISp6ezUFlAAADs="],shwolf:["ID/gMD/wC","IQyOiQas6RqcytlXsY569RaE4vhx5Zedx5WulKuamNwFBQA7"],slalom:["ID//////y","IIwPecsJDIOLcNJlr3FP76yBF+d9SkmipydSbbWOsVEAADs="],slither:["AAAAP///y","F4yPqcutAF5MULqLs978Vjohnxh2ZlYAADs="],sudoku:["P//wP///y","HoRvgcvKDxxccp5qY0bY9hiE4khCn7ldabJq6/l8BQA7"],sukoro:["MDAwODg4C","JYyPoMin39KDMUwa76p2crd9HGaQF0hpQHeqrOe671p6KEOKSAEAOw=="],tapa:["P+hof/R0S","IISPqRAdm9yDR9LqrjY2ZvYhXSd+JNZs2gmxi6vAqlEAADs="],tasquare:["ICAgGBgYC","IYxvoKuIzNyBSyYKbMDZcv15HPaMzWR2l1mmFcrCYzsfBQA7"],tatamibari:["LP/gf///y","HYSPqaHA2x6SM9pETzbbwY9dFTiG5lmmzcq2rlIAADs="],tateyoko:["P/AwP///y","H4RjqQvI3+BzJ9hLqUx6R8+BXreRkoZhofiJJvROSgEAOw=="],tawa:["MDAwODg4C","GIR/gcud3hRccj57Mai6+8lZIeiNkOlwBQA7"],tentaisho:["IWL/X23/y","KASCYcum+5qDUx6mYtPZ3u19VZhooVWeBzJK5WNCr7jNsfOyXq6mQAEAOw=="],tilepaint:["KCgoICAgC","JowDCYfKug58TlYzbaJbR3w1HTiKn8lBZ5oxpOp6rTurIXvL+TsXADs="],toichika:["ID/gP///y","IoSPqRvsGlqSJlp6adXAwreE4nhwooeYWWlW6ZpObfeRYQEAOw=="],triplace:["MD/wP///y","JgyOCXas6dxrKNiLb51xv0593lJhI6ig0jlCZQabEzuHZH0v8V4AADs="],usotatami:["MD/wP//wC","KIQTppqcvc6BMKIKsIuZN10hjDdZnkguKNeV2ri+pQquKi2l9nulQAEAOw=="],wagiri:["P/rw////y","IIQPEci42dgzs1Ua77na7ShBoNR1YpilKmqtrOd+MVUAADs="],yajikazu:["P/B/f///y","HoSPEMm5DZ8JtNoKmcyTo+1loBh25YVSX3mMnMsyBQA7"],yajilin:["MD/wP///y","HISDicas2tpL0c1Qs968nwuGl0eWHqihmVqxRgEAOw=="],yajitatami:["MD/wP//wC","J4wPeRvpj9SbwLhG4WV8aZkpWBVWFkh1HHSSZTuGY7ypXYnSE/y2BQA7"],yosenabe:["ODg/////y","JIwDd6nGjdqD0VFZr5qg+4ltGgiKJkWO4bJ8nVhCT8yeq20dBQA7"],bosanowa:["P/AwP/hw////////y","LowtAst5l1gTL6Q4r968e5VR0CUBToVJ55NOlQWqIhsvGv3l+j22/FgyzYAlRwEAOw=="],dosufuwa:["JmZmbKysszMzP///y","KUyAYMuW3lhCMJ6plMXZXu59TyiSpIAKZmqoXoq2L6y6EV3PeLifbFAAADs="],sukororoom:["NDQ0ODg4PDw8P///y","NIwfgqebBqJpS8X7nL0g18B1FNJgHukkwsqu6ZiioISYmzljN51LewfhZHBBICw2aSmXggIAOw=="],view:["MD/wP//wP///////y","LoQtEst5l1gTDykZXNq8+99hThWJFHlJ41OqJ5tOFdDKaAbmOnebc71YQWJBSgEAOw=="],wblink:["NDQ0ODg4Pj4+P///y","LoQdIct5l1gLDykpXNq8+99hThWJFHlJ41OqJ5tOFdDKaAbmOnebc71YQWJBSgEAOw=="]}[e])||["MD/wPD/8C","KYQTpogKnFxbMDpa7W18yjhp1yGO1OidW5mSKFuaTyy585t0ctZ+EFAAADs="])[0].length<=10?"R0lGODdhEAAQAIAAA":"R0lGODdhEAAQAKEAA")+e[0]+"wAAAAAEAAQAAAC"+e[1]},modifyCSS:function(e){var t=u.styleSheets[0],i=t.cssRules;if(null!==i&&!this.modifyCSS_sub(i,e)){var a="";for(a in e)break;t.insertRule(a+" {}",i.length),i=t.cssRules,this.modifyCSS_sub(i,e)}},modifyCSS_sub:function(e,t){for(var i=!1,a=0,o=e.length;a<o;a++){var n=e[a];if(n.selectorText){var s=t[n.selectorText];if(s){for(var l in s)s[l]&&(n.style[l]=s[l]);i=!0}}}return i},walker:function(e,t){for(var i=[e.firstChild];0<i.length;){var a=i.pop();t(a),a.nextSibling&&i.push(a.nextSibling),1===a.nodeType&&0<a.childNodes.length&&i.push(a.firstChild)}},displayByPid:function(e){ui.misc.walker(e,function(e){var t;1===e.nodeType&&((t=ui.customAttr(e,"dispPid"))&&(e.style.display=pzpr.util.checkpid(t,ui.puzzle.pid)?"":"none"),(t=ui.customAttr(e,"autocmpType"))&&(e.style.display=ui.puzzle.painter.autocmp===t?"":"none"))})}},ui.menuarea={captions:[],menuitem:null,nohover:!1,reset:function(){this.createMenu(),this.display()},createMenu:function(){null===this.menuitem&&(this.modifySelector(),this.menuitem={},this.walkElement(d("menupanel"))),ui.misc.displayByPid(d("menupanel")),this.stopHovering()},walkElement:function(e){var o=this;function n(e,t,i){var a,i="function"==typeof i?i:(a=i,function(e){o[a](e),o.nohover&&(e.preventDefault(),e.stopPropagation())});pzpr.util.addEvent(e,t,o,i)}ui.misc.walker(e,function(t){var e,i,a;1===t.nodeType&&"LI"===t.nodeName?(e=!1,(a=ui.customAttr(t,"config"))&&(o.menuitem[a]={el:t},"check"===t.className&&(n(t,"mousedown","checkclick"),e=!0)),ui.customAttr(t,"value")&&(i=t.parentNode.parentNode,a=ui.customAttr(i,"config"),(i=o.menuitem[a]).children||(i.children=[]),i.children.push(t),n(t,"mousedown","childclick"),e=!0),(a=ui.customAttr(t,"menuExec"))&&(n(t,"mousedown",a),e=!0),(a=ui.customAttr(t,"pressExec"))&&(i=a.split(/,/),n(t,"mousedown",i[0]),a[1]&&(n(t,"mouseup",i[1]),n(t,"mouseleave",i[1]),n(t,"touchcancel",i[1])),e=!0),(a=ui.customAttr(t,"popup"))&&(n(t,"mousedown","disppopup"),e=!0),"link"===t.className&&(n(t,"mousedown","updatelink"),e=!0),e||(o.nohover&&t.querySelector("menu")?n(t,"mousedown",function(e){o.showHovering(e,t),e.preventDefault(),e.stopPropagation()}):n(t,"mousedown",function(e){e.preventDefault()})),(i=ui.customAttr(t,"pidlink"))&&t.firstChild.setAttribute("href",i+ui.puzzle.pid)):1===t.nodeType&&"MENU"===t.nodeName?(a=t.getAttribute("label"))&&a.match(/^__(.+)__$/)&&(o.captions.push({menu:t,str_key:RegExp.$1}),o.nohover&&n(t,"mousedown",function(e){e.stopPropagation()})):3===t.nodeType&&t.data.match(/^__(.+)__$/)&&o.captions.push({textnode:t,str_key:RegExp.$1})})},modifySelector:function(){if(pzpr.env.OS.mobile&&d("menupanel").classList){for(var e=u.styleSheets[0],t=e.cssRules||e.rules,i=0,a=t.length;i<a;i++){var o=t[i];o.selectorText&&o.selectorText.match(/\#menupanel.+\:hover.*/)&&(e.insertRule(o.cssText.replace(":hover",".hovering"),i),e.deleteRule(i+1))}this.nohover=!0}},showHovering:function(e,t){this.nohover&&(t.classList.toggle("hovering"),ui.misc.walker(d("menupanel"),function(e){1===e.nodeType&&e.classList&&!e.contains(t)&&e.classList.remove("hovering")}))},stopHovering:function(){this.nohover&&ui.misc.walker(d("menupanel"),function(e){1===e.nodeType&&e.classList&&e.classList.remove("hovering")})},display:function(){d("menupanel").style.display="",d("menu_imagesave").className=ui.enableSaveImage?"":"disabled";var e,t=!ui.puzzle.playeronly;for(e in d("menu_edit").style.display=t?"":"none",d("menu_newboard").style.display=t?"":"none",d("menu_urloutput").style.display=t?"":"none",d("menu_adjust").style.display=t?"":"none",d("menu_turnflip").style.display=t?"":"none",this.menuitem)this.setdisplay(e);this.setdisplay("operation"),this.setdisplay("trialmode"),this.setdisplay("toolarea");for(var i=0;i<this.captions.length;i++){var a=this.captions[i];a.textnode?a.textnode.data=ui.i18n(a.str_key):a.menu&&a.menu.setAttribute("label",ui.i18n(a.str_key))}},setdisplay:function(e){if("trialmode"===e&&(t=0<ui.puzzle.board.trialstage,d("menu_adjust").className=t?"disabled":"",d("menu_turnflip").className=t?"disabled":""),"toolarea"===e){var t=ui.menuconfig.get("toolarea")?ui.i18n("toolarea.hide"):ui.i18n("toolarea.show");d("menu_toolarea").textContent=t}else if(null!==this.menuitem&&this.menuitem[e])if(ui.menuconfig.valid(e)){var i,a,t=this.menuitem[e];if(t.el.style.display="",t.children)for(var o=t.children,n="inputmode"===e?ui.puzzle.mouse.getInputModeList():null,s=0;s<o.length;s++){var l=o[s],u=ui.customAttr(l,"value"),r=u===""+ui.menuconfig.get(e);l.className=r?"checked":"",l.style.display=null===n||0<=n.indexOf(u)?"":"none"}else t.el&&(i=ui.menuconfig.get(e)?"checked":"check",!(a=null)===(a=ui.puzzle.config.getvariant(e)?!ui.puzzle.editmode:a)&&(i+=" disabled"),t.el.className=i)}else this.menuitem[e]&&(this.menuitem[e].el.style.display="none")},checkclick:function(e){var e=e.target;(e="SPAN"===e.nodeName?e.parentNode:e).className.match(/disabled/)||(e=ui.customAttr(e,"config"),ui.menuconfig.set(e,!ui.menuconfig.get(e)))},childclick:function(e){var e=e.target,t=(e="SPAN"===e.nodeName?e.parentNode:e).parentNode.parentNode;ui.menuconfig.set(ui.customAttr(t,"config"),ui.customAttr(e,"value"))},undo:function(){ui.auxeditor.close(!0),ui.undotimer.startUndo()},undostop:function(){ui.undotimer.stopUndo()},undoall:function(){ui.auxeditor.close(!0),ui.puzzle.undoall()},redo:function(){ui.auxeditor.close(!0),ui.undotimer.startRedo()},redostop:function(){ui.undotimer.stopRedo()},redoall:function(){ui.auxeditor.close(!0),ui.puzzle.redoall()},enterTrial:function(){0===ui.puzzle.board.trialstage&&ui.puzzle.enterTrial()},enterFurtherTrial:function(){ui.puzzle.enterTrial()},acceptTrial:function(){ui.auxeditor.close(!0),ui.puzzle.acceptTrial()},rejectTrial:function(){ui.auxeditor.close(!0),ui.puzzle.rejectTrial()},rejectCurrentTrial:function(){ui.auxeditor.close(!0),ui.puzzle.rejectCurrentTrial()},toolarea:function(){ui.menuconfig.set("toolarea",!ui.menuconfig.get("toolarea")),ui.displayAll()},disppopup:function(e){var t,i=e.target;"disabled"!==(i="SPAN"===i.nodeName?i.parentNode:i).className&&(i=ui.customAttr(i,"popup"),pzpr.env.OS.mobile?(t=pzpr.util.getRect(d("menupanel")),ui.popupmgr.open(i,8,t.bottom+8)):(t=pzpr.util.getPagePos(e),ui.popupmgr.open(i,t.px-8,t.py-8)),this.stopHovering())},updatelink:function(e){var t,e=e.target;"duplicate"===ui.customAttr(e.parentNode,"linktype")&&(t=ui.puzzle.getURL(pzpr.parser.URL_PZPRFILE,ui.puzzle.playeronly?"player":"editor"),e.setAttribute("href",t))},answercheck:function(){for(var e=ui.puzzle.check(!0),t=(e.complete&&(ui.timer.stop(),ui.callbackComplete&&ui.callbackComplete(ui.puzzle,e)),""),i=e.text.split(/\n/),a=0;a<i.length;a++)t+='<div style="margin-bottom:6pt;">'+i[a]+"</div>";this.stopHovering(),ui.notify.alert(t)},answerclear:function(){this.stopHovering(),ui.notify.confirm(ui.i18n("ansclear.confirm"),function(){ui.puzzle.ansclear()})},submarkclear:function(){this.stopHovering(),ui.notify.confirm(ui.i18n("subclear.confirm"),function(){ui.puzzle.subclear()})}},ui.popupmgr={popup:null,popups:{},movingpop:null,offset:{px:0,py:0},reset:function(){this.setEvents(),this.translate()},setEvents:function(){ui.event.addEvent(u,"mousemove",this,this.titlebarmove),ui.event.addEvent(u,"touchmove",this,this.titlebarmove),ui.event.addEvent(u,"mouseup",this,this.titlebarup),ui.event.addEvent(u,"touchend",this,this.titlebarup)},translate:function(){for(var e in this.popups)this.popups[e].translate()},addpopup:function(e,t){var i,a={},o=this.popups.template||{};for(i in o)a[i]=o[i];for(i in t)a[i]=t[i];this.popups[e]=a},open:function(e,t,i){e=this.popups[e]||null;return null!==e&&(!e.multipopup&&this.popup&&this.popup.close(),e.show(t,i),!0)},titlebardown:function(e){var t=e.target.parentNode,i=pzpr.util.getPagePos(e);this.movingpop=t,this.offset.px=i.px-parseInt(t.style.left,10),this.offset.py=i.py-parseInt(t.style.top,10),ui.event.enableMouse=!1,e.preventDefault(),e.stopPropagation()},titlebarup:function(e){this.movingpop&&(this.movingpop=null,ui.event.enableMouse=!0)},titlebarmove:function(e){var t,i=this.movingpop;i&&(t=pzpr.util.getPagePos(e),i.style.left=t.px-this.offset.px+"px",i.style.top=t.py-this.offset.py+"px",e.preventDefault())}},ui.popupmgr.addpopup("template",{formname:"",multipopup:!1,pid:"",init:function(){this.form=document[this.formname],this.pop=this.form.parentNode,this.titlebar=this.pop.querySelector(".titlebar")||null,this.titlebar&&(pzpr.util.unselectable(this.titlebar),pzpr.util.addEvent(this.titlebar,"mousedown",ui.popupmgr,ui.popupmgr.titlebardown)),pzpr.util.addEvent(this.form,"submit",this,function(e){e.preventDefault()}),this.walkCaption(this.pop),this.translate(),this.walkEvent(this.pop)},reset:function(){},translate:function(){if(this.captions)for(var e=0;e<this.captions.length;e++){var t=this.captions[e],i=ui.i18n(t.str_key);t.textnode?t.textnode.data=i:t.button&&(t.button.value=i)}},walkCaption:function(e){var t=this;this.captions=[],ui.misc.walker(e,function(e){3===e.nodeType&&e.data.match(/^__(.+)__$/)&&t.captions.push({textnode:e,str_key:RegExp.$1})})},walkEvent:function(e){var i=this;function a(t){return function(e){i[t](e),"click"!==e.type&&(e.preventDefault(),e.stopPropagation())}}ui.misc.walker(e,function(e){var t;1===e.nodeType&&((t=ui.customAttr(e,"buttonExec"))&&pzpr.util.addEvent(e,pzpr.env.API.touchevent?"mousedown":"click",i,a(t)),(t=ui.customAttr(e,"changeExec"))&&pzpr.util.addEvent(e,"change",i,a(t)))})},show:function(e,t){this.pop||this.init(),this.pid!==ui.puzzle.pid&&(this.pid=ui.puzzle.pid,this.reset()),this.pop.style.left=e+"px",this.pop.style.top=t+"px",this.pop.style.display="inline",this.multipopup||(ui.popupmgr.popup=this)},close:function(){this.pop&&(this.pop.style.display="none"),this.multipopup||(ui.popupmgr.popup=null),ui.puzzle.key.enableKey=!0,ui.puzzle.mouse.enableMouse=!0}}),ui.popupmgr.addpopup("newboard",{formname:"newboard",translate:function(){ui.popupmgr.popups.template.translate.call(this),ui.puzzle.klass.Bank.prototype.enabled&&this.loadpresets()},reset:function(){if(ui.misc.displayByPid(this.pop),ui.puzzle.klass.Bank.prototype.enabled?(d("nb_piecebank").style.display="",this.loadpresets()):d("nb_piecebank").style.display="none","tawa"===this.pid)for(var e=0;e<=3;e++){var t=d("nb_shape_"+e).children[0];t.src="data:image/gif;base64,R0lGODdhgAAgAKEBAAAAAP//AP//////ACwAAAAAgAAgAAAC/pSPqcvtD6OctNqLs968+98A4kiWJvmcquisrtm+MpAAwY0Hdn7vPN1aAGstXs+oQw6FyqZxKfDlpDhqLyXMhpw/ZfHJndbCVW9QATWkEdYk+Pntvn/j+dQc0hK39jKcLxcoxkZ29JeHpsfUZ0gHeMeoUyfo54i4h7lI2TjI0PaJp1boZumpeLCGOvoZB7kpyTbzIiTrglY7o4Yrc8l2irYamjiciar2G4VM7Lus6fpcdVZ8PLxmrTyd3AwcydprvK19HZ6aPf5YCX31TW3ezuwOcQ7vGXyIPA+e/w6ORZ5ir9S/gfu0ZRt4UFU3YfHiFSyoaxeMWxJLUKx4IiLGZIn96HX8iNBjQ5EG8Zkk+dDfyJAgS7Lkxy9lOJTYXMK0ibOlTJ0n2eEs97OnUJ40X668SfRo0ZU7SS51erOp0XxSkSaFGtTo1a0bUcSo9bVr2I0gypo9izat2rVs27p9Czfu2QIAOw==",t.style.clip="rect(0px,"+32*(e+1)+"px,32px,"+32*e+"px)"}},show:function(e,t){switch(ui.popupmgr.popups.template.show.call(this,e,t),ui.puzzle.key.enableKey=!1,ui.puzzle.pid){case"sudoku":this.setsize_sudoku();break;case"tawa":this.setsize_tawa();break;default:this.setsize()}},setsize:function(){var e=ui.puzzle.board;this.form.col.value=""+e.cols,this.form.row.value=""+e.rows},getsize:function(){var e=0|this.form.col.value,t=0|this.form.row.value;return e&&t?{col:e,row:t}:null},setsize_sudoku:function(){for(var e=0;e<4;e++)d("nb_size_sudoku_"+e).checked="";switch(ui.puzzle.board.cols){case 16:d("nb_size_sudoku_2").checked=!0;break;case 25:d("nb_size_sudoku_3").checked=!0;break;case 4:d("nb_size_sudoku_0").checked=!0;break;case 6:d("nb_size_sudoku_4").checked=!0;break;default:d("nb_size_sudoku_1").checked=!0}},getsize_sudoku:function(){var e,t=e=d("nb_size_sudoku_2").checked?16:d("nb_size_sudoku_3").checked?25:d("nb_size_sudoku_0").checked?4:d("nb_size_sudoku_4").checked?6:9;return{col:t,row:e}},setsize_tawa:function(){var e=ui.puzzle.board,t=e.cols,i=e.rows,e=e.shape;3===e&&t++,this.form.col.value=""+t,this.form.row.value=""+i,this.setshape(e)},getsize_tawa:function(){var e=0|this.form.col.value,t=0|this.form.row.value;if(!e||!t)return null;var i=this.getshape();return isNaN(i)||1===e&&(0===i||3===i)?null:(3===i&&e--,{col:e,row:t,shape:i})},setshape:function(e){this.setshapeidx([0,2,3,1][e])},getshape:function(){var e=this.getshapeidx();return null!==e?[0,3,1,2][e]:null},clickshape:function(e){this.setshapeidx(+e.target.parentNode.id.charAt(9))},setshapeidx:function(e){for(var t=0;t<=3;t++)d("nb_shape_"+t).style.backgroundColor=t===e?"red":""},getshapeidx:function(){for(var e=0;e<=3;e++)if("red"===d("nb_shape_"+e).style.backgroundColor)return e;return null},loadpresets:function(){for(var e,t=d("nb_piecebank_preset"),i=(t.replaceChildren(),ui.puzzle.board.bank.presets),a=0;a<i.length;a++)i[a].constant&&((e=document.createElement("option")).value=i[a].shortkey,e.textContent=ui.i18n(i[a].name)||i[a].name,t.appendChild(e))},execute:function(){var e,t,i=ui.puzzle.pid;switch(i){case"sudoku":e=this.getsize_sudoku();break;case"tawa":e=this.getsize_tawa();break;default:e=this.getsize()}this.close(),e&&(t=i+"/"+e.col+"/"+e.row,"tawa"===i&&(t+="/"+e.shape),ui.puzzle.klass.Bank.prototype.enabled&&(t+="///"+this.form.preset.value),ui.puzzle.open(t))}}),ui.popupmgr.addpopup("urlinput",{formname:"urlinput",urlinput:function(){this.close(),ui.puzzle.open(this.form.ta.value.replace(/\n/g,""))}}),ui.popupmgr.addpopup("urloutput",{formname:"urloutput",init:function(){ui.popupmgr.popups.template.init.call(this),this.urlanchor=d("urlanchor")},reset:function(e,t){var i=this.form,a=ui.puzzle.pid,o=pzpr.variety(a).exists,n=pzpr.parser,n=ui.puzzle.getURL(n.URL_PZPRV3);this.urlanchor.href=this.urlanchor.textContent=n,i.kanpen.style.display=i.kanpen.nextSibling.style.display=o.kanpen?"":"none",i.heyaapp.style.display=i.heyaapp.nextSibling.style.display="heyawake"===a?"":"none"},show:function(e,t){ui.popupmgr.popups.template.show.call(this,e,t),this.reset(e,t)},urloutput:function(e){var t="",i=pzpr.parser;switch(e.target.name){case"kanpen":t=ui.puzzle.getURL(i.URL_KANPEN);break;case"pzprv3e":t=ui.puzzle.getURL(i.URL_PZPRV3).replace(/\?(\w+)/,"?$1_edit");break;case"heyaapp":t=ui.puzzle.getURL(i.URL_HEYAAPP)}this.urlanchor.href=this.urlanchor.textContent=t}}),ui.popupmgr.addpopup("fileopen",{formname:"fileform",init:function(){ui.popupmgr.popups.template.init.call(this)},fileopen:function(e){var t=this.form.filebox;if(ui.reader||ui.enableGetText){t=t.files[0];if(!t)return;ui.reader?ui.reader.readAsText(t):ui.puzzle.open(t.getAsText(""))}this.form.reset(),this.close()}}),ui.popupmgr.addpopup("filesave",{formname:"filesave",anchor:null,init:function(){ui.popupmgr.popups.template.init.call(this),this.anchor=!ui.enableSaveBlob&&pzpr.env.API.anchor_download?d("saveanchor"):null},reset:function(){var e=pzpr.variety(ui.puzzle.pid).exists.pencilbox,e=(this.form.filetype.options[1].disabled=!e,this.form.filetype.options[2].disabled=!e,pzpr.parser);this.form.ta.value=ui.puzzle.getFileData(e.FILE_PZPR,{}),this.form.ta2.value=this.form.ta.value.replace(/\n/g,"/")},show:function(e,t){ui.popupmgr.popups.template.show.call(this,e,t),this.reset(),this.form.filename.value=ui.puzzle.pid+".txt",this.changefilename(),ui.puzzle.key.enableKey=!1},close:function(){this.filesaveurl&&URL.revokeObjectURL(this.filesaveurl),ui.popupmgr.popups.template.close.call(this)},changefilename:function(){var e=this.form.filetype.value,t=this.form.filename.value.replace(".xml","").replace(".txt",""),i="filesave4"!==e?".txt":".xml",a=pzpr.variety(t);a.pid===ui.puzzle.pid&&(t="filesave"===e||"filesave3"===e?a.urlid:a.kanpenid),this.form.filename.value=t+i},filesaveurl:null,filesave:function(){for(var e=this.form,t=e.filename.value,i=["\\","/",":","*","?",'"',"<",">","|"],a=0;a<i.length;a++)if(-1!==t.indexOf(i[a]))return void ui.notify.alert(ui.i18n("filesave.invalid"));var o=pzpr.parser,n=o.FILE_PZPR,s={};switch(e.filetype.value){case"filesave2":n=o.FILE_PBOX;break;case"filesave4":n=o.FILE_PBOX_XML;break;case"filesave3":n=o.FILE_PZPR,s.history=!0}var l=null,u=null;ui.enableSaveBlob||this.anchor?l=new Blob([ui.puzzle.getFileData(n,s)],{type:"text/plain"}):u=ui.puzzle.getFileData(n,s),ui.enableSaveBlob?(navigator.saveBlob(l,t),this.close()):this.anchor?(this.filesaveurl&&URL.revokeObjectURL(this.filesaveurl),this.filesaveurl=URL.createObjectURL(l),this.anchor.href=this.filesaveurl,this.anchor.download=t,this.anchor.click()):(e.ques.value=u,e.operation.value="filesave4"!==e.filetype.value?"save":"savexml",e.submit(),this.close()),ui.puzzle.saved()}}),ui.popupmgr.addpopup("imagesave",{formname:"imagesave",anchor:null,showsize:null,bankLabel:null,init:function(){ui.popupmgr.popups.template.init.call(this),this.anchor=!ui.enableSaveBlob&&pzpr.env.API.anchor_download?d("saveanchor"):null,this.showsize=d("showsize"),this.bankLabel=d("bank_label");for(var e=this.form.filetype,t=e.options,i=0;i<t.length;i++){var a=t[i];ui.enableImageType[a.value]||(e.removeChild(a),i--)}},show:function(e,t){ui.popupmgr.popups.template.show.call(this,e,t),ui.puzzle.key.enableKey=!1,ui.puzzle.mouse.enableMouse=!1,this.form.filename.value=pzpr.variety(ui.puzzle.pid).urlid+".png",this.form.cellsize.value=ui.menuconfig.get("cellsizeval"),ui.puzzle.board.bank?(this.bankLabel.style.display="",this.form.bank.checked=ui.puzzle.board.bank.shouldDrawBank()):this.bankLabel.style.display="none",this.changefilename(),this.estimatesize()},close:function(){this.saveimageurl&&URL.revokeObjectURL(this.saveimageurl),ui.puzzle.setCanvasSize(),ui.popupmgr.popups.template.close.call(this)},changefilename:function(){var e=this.form.filename.value.replace(/\.\w{3,4}$/,".");this.form.filename.value=e+this.form.filetype.value},estimatesize:function(){var e=+this.form.cellsize.value,t=e*ui.puzzle.painter.getCanvasCols()|0,e=e*ui.puzzle.painter.getCanvasRows()|0;this.showsize.replaceChild(u.createTextNode(t+" x "+e),this.showsize.firstChild)},saveimageurl:null,saveimage:function(){for(var e=this.form,t=e.filename.value,i=["\\","/",":","*","?",'"',"<",">","|"],a=0;a<i.length;a++)if(-1!==t.indexOf(i[a]))return void ui.notify.alert(ui.i18n("filesave.invalid"));var o={cellsize:+this.form.cellsize.value,bank:this.form.bank.checked},n=(this.form.transparent.checked&&(o.bgcolor=""),e.filetype.value);try{ui.enableSaveBlob||this.anchor?ui.puzzle.toBlob(function(e){ui.enableSaveBlob?navigator.saveBlob(e,t):(this.filesaveurl&&URL.revokeObjectURL(this.filesaveurl),this.filesaveurl=URL.createObjectURL(e),this.anchor.href=this.filesaveurl,this.anchor.download=t,this.anchor.click()),this.close()}.bind(this),n,1,o):(e.urlstr.value=ui.puzzle.toDataURL(n,1,o).replace(/data:.*;base64,/,""),e.submit(),this.close())}catch(e){ui.notify.alert(ui.i18n("imagesave.error"))}},openimage:function(){var e={cellsize:+this.form.cellsize.value,bank:this.form.bank.checked},a=(this.form.transparent.checked&&(e.bgcolor=""),this.form.filetype.value),o=navigator.userAgent.match(/(Trident|Edge)\//),n="";try{n=o&&"svg"===a?ui.puzzle.toBuffer("svg",e):ui.puzzle.toDataURL(a,1,e)}catch(e){ui.notify.alert(ui.i18n("imagesave.error"))}function t(e){var t=this.form.filename.value,i=window.open("","","").document;i.open(),i.writeln('<!DOCTYPE html>\n<HTML LANG="ja">\n<HEAD>'),i.writeln('<META CHARSET="utf-8">'),i.writeln("<TITLE>ぱずぷれv3</TITLE>\n</HEAD><BODY>"),e?(i.writeln('<img src="',n,'"><br>\n'),i.writeln('<a href="',i.defaultView.URL.createObjectURL(e),'" download="',t,'">Download ',t,"</a>")):o&&"svg"===a?i.writeln(n.replace(/^<\?.+?\?>/,"")):i.writeln('<img src="',n,'">'),i.writeln("</BODY>\n</HTML>"),i.close()}n&&(pzpr.env.API.anchor_download?ui.puzzle.toBlob(t.bind(this),a,1,e):t(null))}}),ui.popupmgr.addpopup("adjust",{formname:"adjust",adjust:function(e){ui.puzzle.board.operate(e.target.name)}}),ui.popupmgr.addpopup("turnflip",{formname:"turnflip",reset:function(){var e=ui.puzzle.board.exec,t=e.allowedOperations(!1);this.form.turnl.disabled=!(t&e.TURN),this.form.turnr.disabled=!(t&e.TURN)},adjust:function(e){ui.puzzle.board.operate(e.target.name)}}),ui.popupmgr.addpopup("metadata",{formname:"metadata",show:function(e,t){ui.popupmgr.popups.template.show.call(this,e,t);var e=this.form,t=ui.puzzle,i=t.board,a=t.metadata;d("metadata_variety").innerHTML=pzpr.variety(t.pid)[pzpr.lang]+"&nbsp;"+i.cols+"×"+i.rows,e.author.value=a.author,e.source.value=a.source,e.hard.value=a.hard,e.comment.value=a.comment},save:function(){var e=this.form,t=ui.puzzle.metadata;t.author=e.author.value,t.source=e.source.value,t.hard=e.hard.value,t.comment=e.comment.value,this.close()}}),ui.popupmgr.addpopup("dispsize",{formname:"dispsize",show:function(e,t){ui.popupmgr.popups.template.show.call(this,e,t),this.form.cellsize.value=ui.menuconfig.get("cellsizeval"),ui.puzzle.key.enableKey=!1},changesize:function(e){var t=0|this.form.cellsize.value;0<t&&ui.menuconfig.set("cellsizeval",t),this.close()}}),ui.popupmgr.addpopup("about",{formname:"about"}),ui.popupmgr.addpopup("network",{formname:"network",urlanchor:null,key:"",init:function(){ui.popupmgr.popups.template.init.call(this),this.urlanchor=d("urlanchor_network"),this.key=Math.random().toString(36).substr(2,8)},coop:function(e,t){var i=pzpr.parser,i=(i=ui.puzzle.getURL(i.URL_PZPRV3)).replace("?","?net=coop&key="+this.key+"&");this.urlanchor.href=this.urlanchor.textContent=i,ui.network.configure("coop",this.key),ui.network.start()}}),ui.toolarea={items:null,captions:[],reset:function(){null===this.items&&(this.items={},this.walkElement(d("usepanel")),this.walkElement(d("checkpanel")),this.walkElement(d("variantpanel")),this.walkElement(d("btnarea"))),ui.misc.displayByPid(d("checkpanel")),ui.misc.displayByPid(d("btnarea")),this.display()},walkElement:function(e){var o=this;function n(e,t,i){var a;pzpr.util.addEvent(e,t,o,(a=i,function(e){o[a](e),"click"!==e.type&&e.stopPropagation()}))}ui.misc.walker(e,function(e){if(1===e.nodeType){if("config"===e.className)o.items[ui.customAttr(e,"config")]={el:e};else if(e.className.match(/child/)){var t=e.parentNode.parentNode,i=ui.customAttr(t,"config"),a=o.items[i];a.children||(a.children=[]),a.children.push(e),n(e,"mousedown","toolclick")}else if("INPUT"===e.nodeName&&"checkbox"===e.type){if(t=e.parentNode,(i=ui.customAttr(t,"config"))||(t=t.parentNode,i=ui.customAttr(t,"config")),!i)return;n(o.items[i].checkbox=e,"click","toolclick")}a=ui.customAttr(e,"buttonExec");a&&n(e,pzpr.env.API.touchevent?"mousedown":"click",a),(a=ui.customAttr(e,"pressExec"))&&(n(e,"mousedown",(i=a.split(/,/))[0]),i[1]&&(n(e,"mouseup",i[1]),n(e,"mouseleave",i[1]),n(e,"touchcancel",i[1])))}else 3===e.nodeType&&e.data.match(/^__(.+)__$/)&&(a=RegExp.$1,o.captions.push({textnode:e,str_key:a}),(t=e.parentNode).className.match(/child/)&&o.captions.push({datanode:t,str_key:a}))})},display:function(){var e,t=ui.menuconfig.get("toolarea")?"block":"none",t=(d("usepanel").style.display=t,d("checkpanel").style.display=t,ui.puzzle.playeronly&&ui.menuconfig.get("timer"));for(e in d("separator2").style.display=t&&ui.menuconfig.get("toolarea")?"":"none",d("timerpanel").style.display=t?"block":"none",this.displayVariantPanel(),this.items)this.setdisplay(e);d("btnarea").style.display="",pzpr.util.unselectable(d("btnarea")),this.setdisplay("operation"),d("btnclear2").style.display=ui.puzzle.board.disable_subclear?"none":"",d("btncolor").style.display="tentaisho"===ui.puzzle.pid?"":"none",d("btnflush").style.display=ui.puzzle.board.hasflush&&!ui.puzzle.playeronly?"":"none",d("btnpresets").style.display=ui.puzzle.board.bank&&ui.puzzle.board.bank.presets.length&&!ui.puzzle.playeronly?"":"none",d("btnirowake").style.display=ui.puzzle.painter.irowake&&!ui.menuconfig.get("toolarea")?"":"none",d("btnirowakeblk").style.display=ui.puzzle.painter.irowakeblk&&!ui.menuconfig.get("toolarea")?"":"none",this.setdisplay("trialmode"),this.setdisplay("network");for(var i=0;i<this.captions.length;i++){var a=this.captions[i];a.textnode&&(a.textnode.data=ui.i18n(a.str_key)),a.datanode&&a.datanode.setAttribute("data-text",ui.i18n(a.str_key))}},displayVariantPanel:function(){var e=function(){if(!ui.menuconfig.get("toolarea"))return!1;var e,t=ui.puzzle.config.getVariants();if(Object.keys(t).length<=0)return!1;if(!ui.puzzle.playeronly)return!0;for(e in t)if(t[e])return!0}()?"block":"none";d("separator1").style.display=e,d("variantpanel").style.display=e,ui.puzzle.playeronly&&d("variantpanel").classList.add("playeronly")},setdisplay:function(e){"variant"===e&&(t=ui.menuconfig.get("variant")?ui.i18n("check.variant"):ui.i18n("check"),d("btncheck").textContent=t);var t=0<ui.puzzle.board.trialstage,i=""!==ui.network.mode;if("operation"===e){var a=ui.puzzle.opemgr;d("btnundo").disabled=!a.enableUndo,d("btnredo").disabled=!a.enableRedo,d("btntriale").disabled=a.atStartOfTrial()}else if("trialmode"===e)d("btnclear").disabled=t,d("btntrial").disabled=t,d("btntrialarea").style.display=t&&!i?"block":"none";else if("network"===e)d("btnundo").style.display=i?"none":"inline",d("btnredo").style.display=i?"none":"inline",d("btntrial").style.display=i?"none":"inline",d("btntrialarea").style.display=t&&!i?"block":"none";else if(null!==this.items&&this.items[e])if(ui.menuconfig.valid(e)){a=this.items[e],t=(a.el.style.display="","mode"===e&&this.displayVariantPanel(),null);if(a.children){for(var o=a.children,n="inputmode"===e?ui.puzzle.mouse.getInputModeList():"auxeditor_inputmode"===e?ui.auxeditor.puzzle.mouse.getInputModeList():null,s=0;s<o.length;s++){var l=o[s],u=ui.customAttr(l,"value"),r=u===""+ui.menuconfig.get(e);l.className=r?"child childsel":"child",l.style.display=null===n||0<=n.indexOf(u)?"":"none"}null!==(t="inputmode"===e?1===n.length:t)&&(a.el.className=t?"disabled":"")}else a.checkbox&&((i=a.checkbox)&&(i.checked=ui.menuconfig.get(e)),"keypopup"===e&&(t=!ui.keypopup.paneltype[ui.puzzle.editmode?1:3]),"bgcolor"===e&&(t=ui.puzzle.editmode),"mouseonly"===e&&(t=ui.puzzle.editmode&&"magnets"===ui.puzzle.pid),null!==(t=ui.puzzle.config.getvariant(e)?!ui.puzzle.editmode:t)&&(a.checkbox.disabled=t?"true":""))}else this.items[e]&&(this.items[e].el.style.display="none")},toolclick:function(e){var e=e.target,t=e.parentNode,t=ui.customAttr(t,"config")||ui.customAttr(t.parentNode,"config"),e=this.items[t].checkbox?!!e.checked:ui.customAttr(e,"value");ui.menuconfig.set(t,e)},answercheck:function(){ui.menuarea.answercheck()},undo:function(){ui.auxeditor.close(!0),ui.undotimer.startUndo()},undostop:function(){ui.undotimer.stopUndo()},redo:function(){ui.auxeditor.close(!0),ui.undotimer.startRedo()},redostop:function(){ui.undotimer.stopRedo()},ansclear:function(){ui.menuarea.answerclear()},subclear:function(){ui.menuarea.submarkclear()},irowake:function(){ui.puzzle.irowake()},encolorall:function(){ui.puzzle.board.encolorall()},dropblocks:function(){ui.puzzle.board.operate("drop")},resetblocks:function(){ui.puzzle.board.operate("resetpos")},outlineshaded:function(){ui.puzzle.board.operate("outlineshaded")},flushexcell:function(){ui.puzzle.board.flushexcell()},applypreset:function(e){ui.auxeditor.close(),ui.popupmgr.open("applypreset",0,0);var t=pzpr.util.getRect(d("btnarea")),i=pzpr.util.getRect(d("popapplypreset"));ui.popupmgr.open("applypreset",t.left+(t.width-i.width)/2,Math.max(16,t.top-i.height-16))},enterTrial:function(){0===ui.puzzle.board.trialstage&&ui.puzzle.enterTrial()},enterFurtherTrial:function(){ui.puzzle.enterTrial()},acceptTrial:function(){ui.puzzle.acceptTrial()},rejectTrial:function(){ui.puzzle.rejectCurrentTrial()}},ui.notify={onconfirm:null,reset:function(){this.walkElement(d("notifies"))},walkElement:function(e){var i=this;ui.misc.walker(e,function(e){var t;1===e.nodeType&&((t=ui.customAttr(e,"buttonExec"))&&pzpr.util.addEvent(e,pzpr.env.API.touchevent?"mousedown":"click",i,i[t]),"titlebar"===e.className&&(pzpr.util.addEvent(e,"mousedown",ui.popupmgr,ui.popupmgr.titlebardown),pzpr.util.addEvent(e,"touchstart",ui.popupmgr,ui.popupmgr.titlebardown)))})},alert:function(e){d("notification").innerHTML=e,this.setVerticalPosition(d("assertbox"))},confirm:function(e,t){d("confirmcaption").innerHTML=e,this.setVerticalPosition(d("confirmbox")),this.onconfirm=t},setVerticalPosition:function(e){var t=d("notifybg"),i=(t.style.display="block",e.style.display="inline-block",pzpr.util.getRect(e)),t=pzpr.util.getRect(t);e.style.top=(t.height-i.height)/2+"px",e.style.left=(t.width-i.width)/2+"px"},closealert:function(e){d("assertbox").style.display="none",d("notifybg").style.display="none",e.preventDefault(),e.stopPropagation()},confirmtrue:function(e){this.onconfirm&&this.onconfirm(),this.onconfirm=null,this.confirmfalse(e)},confirmfalse:function(e){d("confirmbox").style.display="none",d("notifybg").style.display="none",e.preventDefault(),e.stopPropagation()}},ui.keypopup={paneltype:{1:0,3:0},element:null,tdcolor:"black",imgCR:[1,1],imgs:[],basepanel:null,clearflag:!1,type:{slither:[3,0],nawabari:[4,0],fourcells:[4,0],fivecells:[4,0],fillmat:[4,0],paintarea:[4,0],lightup:[4,0],shakashaka:[4,0],gokigen:[4,0],wagiri:[4,0],shugaku:[4,0],creek:[4,0],ichimaga:[4,0],ichimagam:[4,0],ichimagax:[4,0],sukoro:[4,4],sukororoom:[4,4],lookair:[5,0],hebi:[5,5],tawa:[6,0],hashikake:[8,0],tapa:[8,0],tapaloop:[8,0],amibo:[10,0],cave:[10,0],bdblock:[10,0],country:[10,0],usotatami:[10,0],heyawake:[10,0],ayeheya:[10,0],kurodoko:[10,0],nagenawa:[10,0],numlin:[10,0],nurikabe:[10,0],nuribou:[10,0],norinuri:[10,0],mochikoro:[10,0],mochinyoro:[10,0],shikaku:[10,0],aho:[10,0],shimaguni:[10,0],chocona:[10,0],yajitatami:[10,0],tasquare:[10,0],kurotto:[10,0],bonsan:[10,0],heyabon:[10,0],rectslider:[10,0],satogaeri:[10,0],yosenabe:[10,0],herugolf:[10,0],firefly:[10,0],tateyoko:[10,0],factors:[10,10],fillomino:[10,10],symmarea:[10,10],renban:[10,10],ripple:[10,10],cojun:[10,10],makaro:[10,10],sudoku:[10,10],nanro:[10,10],view:[10,10],kakuru:[10,10],kazunori:[10,10],skyscrapers:[10,10],kropki:[0,10],tilepaint:[51,0],triplace:[51,0],kakuro:[51,10],usoone:[4,0],slalom:[101,0],reflect:[102,0],pipelink:[111,0],pipelinkr:[111,0],loopsp:[111,0],tatamibari:[112,0],hakoiri:[113,113],kusabi:[114,0],aqre:[10,0],doppelblock:[10,115],interbd:[116,0],toichika2:[10,10],crossstitch:[10,0],ovotovata:[10,0],lohkous:[10,0],chainedb:[10,0],canal:[10,0],cbanana:[10,0],bdwalk:[117,0],voxas:[118,0],oneroom:[10,0],tontti:[10,0],lapaz:[10,0],tren:[10,0],pentominous:[119,119],hinge:[10,0],tajmahal:[8,0],railpool:[10,0],coral:[10,0],ququ:[10,0],disloop:[10,0],lither:[3,0],snakepit:[120,10],squarejam:[10,0],context:[4,0],numrope:[10,10],yajisoko:[10,0],roundtrip:[10,0],cts:[121,0],vslither:[4,0],tslither:[4,0],kaidan:[4,0],anglers:[122,0],heyablock:[10,0],koburin:[4,0],mirrorbk:[10,0],takoyaki:[4,0],lightshadow:[10,0],familyphoto:[10,0],icelom:[10,0],icelom2:[10,0],icewalk:[10,0],ladders:[10,0],akichi:[10,0],slashpack:[10,0],remlen:[10,0],cocktail:[10,0],news:[123,123],dbchoco:[10,0],nurimisaki:[10,0],nonogram:[10,0],box:[10,0],aquarium:[10,0],snake:[10,0],tents:[10,0],armyants:[10,0],araf:[10,0],bosanowa:[10,10],meander:[10,10],juosan:[10,0],walllogic:[10,0],mines:[8,0],pencils:[10,0],minarism:[10,10],trainstations:[124,0],wafusuma:[10,0],kuroclone:[10,0],martini:[10,0],simplegako:[10,10],tontonbeya:[113,113],magnets:[125,0],fracdiv:[51,0],battleship:[126,0],heyapin:[10,0],detour:[10,0],maxi:[10,0],tetrochain:[10,0],brownies:[127,0],sashikazune:[10,0],patchwork:[10,0],waterwalk:[10,0],haisu:[10,0],wittgen:[4,0],aquapelago:[10,0],retroships:[129,0],compass:[10,0],mukkonn:[10,0],tachibk:[10,0],alter:[113,113],mannequin:[10,0],tetrominous:[128,128],lineofsight:[10,0],mrtile:[10,0],subomino:[10,0],lixloop:[130,0],teri:[10,0],portal:[10,0],genderwalk:["gender",0]},display:function(){var e=ui.puzzle.editmode?1:3;this.element&&this.paneltype[e]&&ui.menuconfig.get("keypopup")?(this.element.style.display="block",d("panelbase1").style.display=1==e?"block":"none",d("panelbase3").style.display=3==e?"block":"none"):this.element&&(this.element.style.display="none")},create:function(){this.element&&(d("panelbase1").innerHTML="",d("panelbase3").innerHTML=""),this.imgs=[];var e=(e=this.type[ui.puzzle.pid])||[0,0];this.paneltype={1:ui.puzzle.playeronly?0:e[0],3:e[1]},(this.paneltype[1]||this.paneltype[3])&&(this.element||(e=pzpr.util.getRect(d("divques")),this.element=d("keypopup"),this.element.style.left=e.left+48+"px",this.element.style.top=e.top+48+"px",pzpr.util.unselectable(this.element)),0!==this.paneltype[1]&&this.createtable(1),0!==this.paneltype[3]&&this.createtable(3),this.resizepanel(),e=d("barkeypopup"),ui.event.addEvent(e,"mousedown",ui.popupmgr,ui.popupmgr.titlebardown),ui.event.addEvent(e,"dblclick",ui.menuconfig,function(){this.set("keypopup",!1)}))},createtable:function(e,t){this.basepanel=d("panelbase"+e),this.basepanel.innerHTML="",this.tdcolor=3===e?ui.puzzle.painter.fontAnscolor:"black",this.generate(e)},generate:function(e){var t=this.paneltype[e];4===t?this.gentable4(e):10===t?this.gentable10(e):51===t?this.gentable51(e):3===t?this.gentable3(e):5===t?this.gentable5(e):6===t?this.gentable6(e):8===t?this.gentable8(e):101===t?this.generate_slalom(e):102===t?this.generate_reflect(e):111===t?this.generate_pipelink(e):112===t?this.generate_tatamibari(e):113===t?this.generate_hakoiri(e):114===t?this.generate_kusabi(e):115===t?this.generate_doppelblock():116===t?this.generate_interbd():117===t?this.generate_bdwalk():118===t?this.generate_voxas():119===t?this.generate_pentominous(e):120===t?this.generate_snakepit(e):121===t?this.generate_cts(e):122===t?this.generate_anglers(e):123===t?this.generate_news(e):124===t?this.generate_trainstations(e):125===t?this.generate_magnets(e):126===t?this.generate_battleship(e):127===t?this.generate_brownies(e):128===t?this.generate_tetrominous(e):129===t?this.generate_retroships(e):130===t?this.generate_lix(e):"gender"===t&&this.generate_genderwalk(e)},gentable4:function(e){var t=ui.puzzle.pid,i=["1","2","3","4"];if(3!==e||"sukoro"!==t&&"sukororoom"!==t){var a="?";if(ui.puzzle.painter.hideHatena)switch(t){case"lightup":case"shakashaka":a="■";break;case"gokigen":case"wagiri":case"shugaku":case"creek":a="○"}i.push("0",null," ",["-",a])}else{e=ui.puzzle.painter.mbcolor;i.push(["q",{text:"○",color:e}],["w",{text:"×",color:e}]," ",null)}this.generate_main(i,4)},gentable10:function(e){var t=ui.puzzle.pid,i=[],a=(3===e&&ui.puzzle.klass.Cell.prototype.numberWithMB&&(a=ui.puzzle.painter.mbcolor,i.push(["q",{text:"○",color:a}],["w",{text:"×",color:a}]," ",null)),1!==e||"kakuru"!==t&&"tateyoko"!==t&&"crossstitch"!==t&&"numrope"!==t&&"yajisoko"!==t||(i.push(["q1","yajisoko"===t?"□":"■"]),"crossstitch"===t&&i.push(["w2","○"]),i.push(["-","?"])),i.push("0","1","2","3","4","5","6","7","8","9"),3===e&&"toichika2"===t&&i.push(["-",{text:"・",color:"rgb(255, 96, 191)"}]),i.push(1!==e&&ui.puzzle.klass.Cell.prototype.numberWithMB?null:" "),null);3!==e&&"kakuru"!==t&&"numrope"!==t&&"tateyoko"!==t&&"crossstitch"!==t&&"yajisoko"!==t&&("tasquare"===t?a="□":"rectslider"===t||"aquapelago"===t||"mrtile"===t?a="■":"patchwork"===t?a={text:"■",color:"rgb(204,204,204)"}:"kurotto"===t||"bonsan"===t||"satogaeri"===t||"heyabon"===t||"yosenabe"===t||"herugolf"===t||"kazunori"===t||"nurimisaki"===t||"amibo"===t||"firefly"===t||"shikaku"===t||"aho"===t||"bosanowa"===t||"portal"===t||"minarism"===t?a="○":ui.puzzle.painter.hideHatena||(a="?")),null!==a&&i.push(["-",a]),"familyphoto"===t&&i.push(["q","●"]),"icelom"!==t&&"icelom2"!==t&&"icewalk"!==t&&"waterwalk"!==t&&"dbchoco"!==t||i.push(["q",{text:"■",color:"dbchoco"===t?"rgb(204,204,204)":"rgb(192,224,255)"}]),this.generate_main(i,4)},gentable51:function(e){this.generate_main([["q",{image:0}]," ","1","2","3","4","5","6","7","8","9","0"],4)},gentable3:function(e){this.generate_main(["1","2","3","0"," ",["-","?"]],3)},gentable5:function(e){this.generate_main(["1","2","3","4","5",null,"0"," ",["-",{text:1===e?"?":"・",color:3===e?"rgb(255, 96, 191)":""}]],3)},gentable6:function(e){this.generate_main(["1","2","3","4","5","6","0"," ",["-","?"]],3)},gentable8:function(e){var t=ui.puzzle.pid;"brownies"===t?this.generate_main(["1","2","3","4","5","6","7","8"," ",["-","?"],["w","○"]],4):"tapa"!==t&&"tapaloop"!==t&&"mines"!==t?this.generate_main(["1","2","3","4","5","6","7","8"," ",["-","○"]],4):this.generate_main(["1","2","3","4","5","6","7","8","0"," ",["-","?"]],4)},generate_slalom:function(e){this.imgCR=[4,1],this.generate_main([["q",{image:0}],["s",{image:1}],["w",{image:2}],["e",{image:3}],["r"," "],"1","2","3","4","5","6","7","8","9","0","-"," "],5)},generate_reflect:function(e){this.imgCR=[4,1],this.generate_main([["q",{image:0}],["w",{image:1}],["e",{image:2}],["r",{image:3}],["t","╋"],["y"," "],"1","2","3","4","5","6","7","8","9","0","-"],6)},generate_pipelink:function(e){var t=ui.puzzle.pid,i=[];i.push(["q","╋"],["w","┃"],["e","━"],["r"," "],"loopsp"!==t?["-","?"]:null,["a","┗"],["s","┛"],["d","┓"],["f","┏"]),"pipelink"===t?i.push(null):"pipelinkr"===t?i.push(["1","○"]):"loopsp"===t&&i.push(["-","○"]),"loopsp"===t&&i.push("1","2","3","4","5","6","7","8","9","0"),this.generate_main(i,5)},generate_tatamibari:function(e){this.generate_main([["q","╋"],["w","┃"],["e","━"],["r"," "],["-","?"]],3)},generate_hakoiri:function(e){var t=ui.puzzle.pid,i=[];i.push(["1","○"],["2","△"],["3","□"]),"hakoiri"!==t&&"alter"!==t||i.push(["4",{text:1===e?"?":"・",color:3===e?"rgb(255, 96, 191)":""}]),i.push(" "),this.generate_main(i,3)},generate_kusabi:function(e){this.generate_main([["1","同"],["2","短"],["3","長"],["-","○"]," "],3)},generate_doppelblock:function(){this.generate_main(["1","2","3","4","5","6","7","8","9","0",["q","⋅"],["w","■"]," "],5)},generate_interbd:function(){this.generate_main(["1","2","3","4","0",["-",{text:"?",color:"gray"}],["q",{text:"●",color:"red"}],["w",{text:"◆",color:"blue"}],["e",{text:"▲",color:"green"}],["r",{text:"■",color:"#c000c0"}],["t",{text:"⬟",color:"#ff8000"}],["y",{text:"⬣",color:"#00c0c0"}]," "],4)},generate_bdwalk:function(){this.generate_main([["-",{text:"■",color:"gray"}],["u",{text:"▲"}],["d",{text:"▼"}],"1","2","3","4","5","6","7","8","9","0"," "],4)},generate_voxas:function(){this.generate_main([["2",{text:"●"}],["3",{text:"●",color:"gray"}],["4",{text:"○"}],["1",{text:"━"}]," "],3)},generate_pentominous:function(e){var t="filnptuvwxyz".split("").map(function(e){return[e,{text:e.toUpperCase()}]});1===e&&t.push(["-","?"],["q","■"]),t.push(" "),this.generate_main(t,5)},generate_tetrominous:function(e){var t="ilost".split("").map(function(e){return[e,{text:e.toUpperCase()}]});1===e&&t.push(["-","?"],["q","■"]),t.push(" "),this.generate_main(t,4)},generate_snakepit:function(){this.generate_main(["0","1","2","3","4","5","6","7","8","9"," ",["-","?"],["q",{text:"○"}],["w",{text:"■",color:"gray"}]],4)},generate_cts:function(){this.generate_main(["1","2","3","4","5","6","7","8","9","0",["-","?"],["w","*"]," "],5)},generate_anglers:function(){this.imgCR=[2,1],this.generate_main(["1","2","3","4","5","6","7","8","9","0",["-","?"],["q",{image:0}],["w",{image:1}]," "],5)},generate_news:function(e){var t=ui.puzzle.painter.mbcolor;this.generate_main([3===e?["z",{text:"○",color:t}]:" ",["n","N"]," ",["w","W"],["x",3===e?{text:"⋅",color:t}:"×"],["e","E"]," ",["s","S"]," "],3)},generate_trainstations:function(e){this.generate_main(["0","1","2","3","4","5","6","7","8","9"," ",["-","?"],["q","╋"]],4)},generate_magnets:function(e){this.generate_main(["0","1","2","3","4","5","6","7","8","9"," ",["q",{text:"■",color:"gray"}],["1","╋"],["2","━"]],4)},generate_battleship:function(e){this.imgCR=[10,1],this.generate_main([["7",{image:6}],["8",{image:7}],["1",{image:4}],"1","2","3",["9",{image:8}],["a",{image:9}],["2",{image:5}],"4","5","6",["3",{image:2}],["5",{image:0}],["4",{image:3}],"7","8","9",["6",{image:1}],["0",{text:"~",color:"blue"}],["-","?"]," ","0"],6)},generate_retroships:function(e){this.imgCR=[10,1],this.generate_main([["7",{image:6}],["8",{image:7}],["1",{image:4}]," ",["9",{image:8}],["a",{image:9}],["2",{image:5}]," ",["3",{image:2}],["5",{image:0}],["4",{image:3}]," ",["6",{image:1}],["0",{text:"~",color:"blue"}],["-","?"]," "],4)},generate_brownies:function(e){this.generate_main(["0","1","2","3","4","5","6","7","8"," ",["q","○"],["w","■"]],4)},generate_lix:function(e){this.generate_main([["l","L"],["i","I"],["x","X"],["-","?"]," "],3)},generate_genderwalk:function(){this.imgCR=[4,4],this.generate_main([["a",{image:0}],["b",{image:1}],["c",{image:2}],["d",{image:3}],["e",{image:4}],["f",{image:5}],["g",{image:6}],["h",{image:7}],["i",{image:8}],["j",{image:9}],["k",{image:10}],["l",{image:11}],["m",{image:12}],["n",{image:13}],["o",{image:14}],["p",{image:15}]," ",["-","?"],["q",{text:"■",color:"rgb(255, 179, 255)"}]],4)},generate_main:function(e,t){for(var i=0;i<e.length;i++)this.inputcol(e[i]),(i+1)%t==0&&this.insertrow();i%t!=0&&this.insertrow()},inputcol:function(e){var t,i,a="num",o=this.tdcolor,e=(e?"string"==typeof e?t=i=e:"string"==typeof e[1]?(t=e[0],i=e[1]):e[1].text?(t=e[0],i=e[1].text,o=e[1].color):void 0!==e[1].image&&(t=e[0],i=e[1].image,a="image"):a="empty",null),n=null;"empty"!==a?((e=r("div")).className="kpcell kpcellvalid",e.onclick=function(e){e.preventDefault()},ui.event.addEvent(e,"mousedown",ui.puzzle,function(e){this.key.keyevent(t,0),e.preventDefault(),e.stopPropagation()})):(e=r("div")).className="kpcell kpcellempty",pzpr.util.unselectable(e),"num"===a?((n=r("span")).className="kpnum",n.style.color=o,n.innerHTML=i,pzpr.util.unselectable(n)):"image"===a&&((n=r("img")).className="kpimg",o=ui.puzzle.pid,n.src="data:image/gif;base64,"+this.dataurl[this.dataurl[o="retroships"===o?"battleship":o]?o:"shitappa"],pzpr.util.unselectable(n),o=(i-(a=i%this.imgCR[0]))/this.imgCR[1],this.imgs.push({el:n,x:a,y:o})),this.clearflag&&(e.style.clear="both",this.clearflag=!1),n&&e.appendChild(n),this.basepanel.appendChild(e)},insertrow:function(){this.clearflag=!0},resizepanel:function(){for(var e=Math.min(ui.puzzle.painter.cw,120),t=.9*(e=e<20?20:e)|0,e=.7*e|0,i=0,a=this.imgs.length;i<a;i++){var o=this.imgs[i],n=o.el;n.style.width=t*this.imgCR[0]+"px",n.style.height=t*this.imgCR[1]+"px",n.style.clip="rect("+(t*o.y+1)+"px,"+t*(o.x+1)+"px,"+t*(o.y+1)+"px,"+(t*o.x+1)+"px)",n.style.top="-"+o.y*t+"px",n.style.left="-"+o.x*t+"px"}ui.misc.modifyCSS({"div.kpcell":{width:t+"px",height:t+"px",lineHeight:t+"px"},"span.kpnum":{fontSize:e+"px"}})},dataurl:{slalom:"R0lGODlhAAFAAMIEAAICAmBgYJ+fn///////AP//AP//AP//ACH5BAEKAAQALAAAAAAAAUAAAAP+OLrc/jDKSau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru+24AdAH68BKBqHNqNyyWw6n9DSD2oMCHhMZI3K7XqLI0Hgq7TmstoZec0GhMTt8jW5TKvj+OhnnFfOaWh2MH2EdR0ChUtmd0qCMYmJHXxOQFZ/P5OUjEeOL5CFHJmKfxFTmp2oIZ+EG6JVpBVwTQGptR2rfRquAIsbiLO2wRi4eRm7tB+yS7DCzQ7EeBi/yyO7zCiBziTQcRfTfiWuyCzZ2iLcbReu1yDrLeXmIOhsFt9F7CGu74bx5/NkFkSNO2EPAL4R8Prd+vclFpODbxKWkKhQA8OGFAS2EAX+UR6/ih4ueqFQsGPEMiCDieySUZGLkilrreTSEpwLjjFTzaRCweULewNz2tmpR4JPTyhTUBQ6geiTCUBjiFKxlGkEp06gUoMxVelHqxawNpmAE4Y9kxyqevw4dkFbt+XeQhBbtezPrSfUfpDLN67fr8/oNpLQ1SxeE3pDZuv7Ve4Ax4EFgyF8uMVZr4MxZ368+O9mzoCJSJ5cqjILeyAZb3bMuupo0hAucw3tTDUnBa0bu36tNemLwmCRvHbT1Lflo8GHDO9JG0XU5MJ5kzWdwm7e5tBFjyaJXAVMzbCzX5Ve3OaK5+CJizdKnrLx9GgXfl4fWbJD6iQ0rkgMfXmvBX0pfEcVdvT5x113+SF43Xz0MWBgTeYliF+DgLTH3IShMBEUhTc8eCCGxjQRH4fkWAjhe744MSKJ+5l4YoQhisjiDh4GRMmKBRmx4lq3zQiafa08YQlUu+goA3/J1agOFUH44CQQXOyoCoHrKelNkXj08giV4lkpTSJaHslldl5Kg2UXYW4SHotlapAjk1Iu2KOPVplCyZB05pmDk0Lo6eefgAYq6KCEFmrooSwkAAA7",anglers:"R0lGODdhgABAAPQAAP///wICAp+fn4CAgLCwsMDAwD8/PwAAABAQEFBQUKCgoO/v7yAgIDAwMJCQkN/f329vb39/fx8fH8/Pzy8vL6+vr7+/vw8PD2BgYF9fX0BAQE9PT4+PjwAAAAAAAAAAACwAAAAAgABAAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsGoOBpHLJbDqfUOexGK1ar80pEcvtSrVCr9gLDo/P1plgQCgUyim0HDozHO74hGIBH83/TDFrDHiFdw0OD3CAjAExEIaReAN8Wo2Aj3gSBnaSd5RTl3+ZnyMTERSSDBVHonMxFnknAhKRoFuuaLCyKBEXhhiVZrlju3grvoUNwkDEZzK1d6wqE7+aE8POXTKQdxktqZrMPdpiMhXiLRnKSOXb0HjY6oXBP+7vMRu84IUC9vdY1BSy8CLcHXk8AAass49FtYY6FF6hESvei4oHyUmsUqPTAQbjVHjUoHEjHRoP2O+5wHjA3w6TUWx08/Zi3aGEMJ/cMNjSRUqLEXN+sRFNmgt9pYIKDXTj4aQWAiDaWJoFBzp6DguFpEGVqVVDy1YYdImj65IdTp+mSHYgglKzPB7wTGoCo4G3XX0gVTYAoQi7eKn+iKoKQxsATsOWNZskCFtPYDVInizZLwvGjYXMhMz5AMEXmB0REWCzs6TPLkJPsQCBk2mgqTH3ATDQgu3btrfGkd1Haw7VvY/95r1I+GLGs30fhxv8TuClyY3fAF7c+XDkzQ88Fzo7gne315nPxol9/Evi5sPnTb89J/v38OPLn0+/vv37+PPr3z8+BAA7",battleship:"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",reflect:"R0lGODlhAAFAAIABAAAAAP///yH5BAEKAAEALAAAAAAAAUAAAAL+jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6bgD8H/A9AMSi8YhMKpdJCPMJjSKdQiCOGJFqt9Mh96vNYq22ogSMflLT7OPZTJ4ZJ+362GGv0+dxmHufh7YW+EXR1cdy+EbINcgoVdGEqCJp+BjmdRlloTSJ0smpCeUoWmlp6hmyhFHKRNoKFwqaCuLKCqvIgJt7OkvLoZaxy4c3fHcx+ruRLGz8WrrMrCxrq+GciQu8OR25HZ2N3dqByS3m/S0eLuqxVf7si76ufvnR6K7bXp9eDK2ff4+gUK1+/DSpEggwCEJ/9OYFEiEIYMSDDQsyGpHmXkb+jBUbGOQ4URmbEh3xXSTRZlpKkict2jGhh1ZMlg8dbqQ50tPLE4Tegfm0s0+eFDVd3oQ5NE5RnkE9NkWaFEhPSjOdriQ6lUdLrDmN2qOaNcejFlethuQatsxYskdN/mS7Vm3cRGcXtAU7V4Y8F3UV9EWb9wVBvgvdkiO8V/BgxIcNn2P8EXJJycG8rtILi3JgzfDsNlacecWuGp/9QqIxDO8+OY89S8M8mmls0q9dV0N9DWVu2rcd84KdGmTwG5XNosJtrArD4cQvW1YuN/nA5NCj/7G8g3qseLuvHDf9m7d2bdqrN79u/JjY8uq7sZeK3jF89ubNvZ/fHnx+7/Q96z9nrtV2bpHRn4A2SUfgfgEpyF+BiziolH8HMNgghP8hqJQTCW3IYYcefghiiCKOSGKJJp6IYooqrlhOAQA7",shitappa:"R0lGODlhQABAAIABAAAAAP//ACH5BAEKAAEALAAAAABAAEAAAAL6jI+py+0Po5y02ouz3rz7DwHiSJbmiaZnqLbuW7LwTMdPjdcyCUb8veo5fkOUsEFEjgK2YyLJ+DWdBuiCOHVaFcmscPtcIrwg8Fh8Rn/VUXbVvIG/RW13R860z+k9PJys4ad3AIghyFc0aHEI4IMnwQj5uEMpqWjZCIToeFmZmDlRyAmqtIlJWhG5OMnVyRrWeeUaW2c66nkhKmvbykuhC4u6K7xKm+ebRlyMHIwb+Kh6F12qbCg3La2InY28za3s/T3sXGYV7pF1jt41y7yOpv5hEy/PQ18f9Ek1fF8OnAPwxY6ABP8VPMgIYcF9DBs6fAgxosSJFBMUAAA7",genderwalk:"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"}},ui.timer={TID:null,current:0,bseconds:0,timerEL:null,worstACtime:0,nextACtime:0,init:function(){this.worstACtime=0,this.timerEL=document.getElementById("timerpanel"),this.showtime(0)},start:function(){var e=this;this.TID||(ui.puzzle.resetTime(),this.update(),this.TID=setInterval(function(){e.update()},100))},stop:function(){this.TID&&(clearInterval(this.TID),this.TID=null)},update:function(){var e;this.current=pzpr.util.currentTime(),ui.puzzle.playeronly&&this.updatetime(),ui.menuconfig.save(),ui.menuconfig.get("autocheck_once")&&(e=ui.menuconfig.get("autocheck_mode"),this.autocheck("guarded"===e))},showtime:function(e){var t=e/3600|0,i=(e/60|0)-60*t;e=e-60*i-3600*t,i<10&&(i="0"+i),e<10&&(e="0"+e),this.timerEL.innerHTML=[this.label(),t?t+":":"",i,":",e].join("")},updatetime:function(){var e=ui.puzzle.getTime()/1e3|0;this.bseconds!==e&&(this.showtime(e),this.bseconds=e)},label:function(){return ui.i18n("time")+("en"===pzpr.lang?" ":"")},autocheck:function(e){var t=ui.puzzle;if(this.current>this.nextACtime&&t.playmode&&!t.checker.inCheck&&0===t.board.trialstage&&!t.getConfig("variant")){var i=t.check(!1);if(i.complete&&(!e||!i.undecided))return ui.timer.stop(),t.mouse.mousereset(),ui.menuconfig.set("autocheck_once",!1),ui.callbackComplete&&ui.callbackComplete(t,i),void ui.notify.alert(ui.i18n("completed"));this.worstACtime=Math.max(this.worstACtime,pzpr.util.currentTime()-this.current),this.nextACtime=this.current+(this.worstACtime<250?4*this.worstACtime+120:2*this.worstACtime+620)}}},ui.undotimer={TID:null,inUNDO:!1,inREDO:!1,reset:function(){this.stop()},startUndo:function(){this.inUNDO||this.inREDO||(this.inUNDO=!0,this.proc())},startRedo:function(){this.inREDO||this.inUNDO||(this.inREDO=!0,this.proc())},stopUndo:function(){this.inUNDO&&(this.inUNDO=!1,this.proc())},stopRedo:function(){this.inREDO&&(this.inREDO=!1,this.proc())},start:function(){var e=this;function t(){e.proc()}this.TID=setInterval(function(){clearInterval(e.TID),e.TID=setInterval(t,25)},300),this.exec()},stop:function(){this.inUNDO=!1,this.inREDO=!1,clearInterval(this.TID),this.TID=null},proc:function(){!this.inUNDO&&!this.inREDO||this.TID?this.inUNDO||this.inREDO||!this.TID?this.TID&&this.exec():this.stop():this.start()},exec:function(){this.checknextprop()?this.inUNDO?ui.puzzle.undo():this.inREDO&&ui.puzzle.redo():this.stop()},checknextprop:function(){var e=ui.puzzle.opemgr;return this.inUNDO&&e.enableUndo||this.inREDO&&e.enableRedo}},ui.popupmgr.addpopup("auxeditor",{formname:"auxeditor",close:function(){ui.auxeditor.cb&&ui.auxeditor.puzzle&&(ui.auxeditor.cb(ui.auxeditor.puzzle),ui.auxeditor.cb=null),ui.auxeditor.current=null,ui.popupmgr.popups.template.close.apply(this)},delete:function(){var e;ui.auxeditor.puzzle.opemgr.enableUndo?(e=this,ui.notify.confirm(ui.i18n("auxdelete.confirm"),function(){ui.auxeditor.puzzle.board.ansclear(),e.close()})):(ui.auxeditor.puzzle.board.ansclear(),this.close())},init:function(){function i(e,t,i){var a;pzpr.util.addEvent(e,t,ui.toolarea,(a=i,function(e){ui.toolarea[a](e),"click"!==e.type&&(e.preventDefault(),e.stopPropagation())}))}ui.popupmgr.popups.template.init.call(this),ui.misc.walker(this.form,function(e){var t;1===e.nodeType&&("config"===e.className?ui.toolarea.items[ui.customAttr(e,"config")]={el:e}:e.className.match(/child/)&&(t=e.parentNode.parentNode,t=ui.customAttr(t,"config"),(t=ui.toolarea.items[t]).children||(t.children=[]),t.children.push(e),i(e,"mousedown","toolclick")))})},adjust_aux:function(e){ui.auxeditor.puzzle.board.operate(e.target.name)}}),ui.auxeditor={current:null,cb:null,close:function(e){ui.popupmgr.popups.auxeditor.pop&&(e&&(this.cb=null),ui.popupmgr.popups.auxeditor.close())},open:function(e,t,i){var a,o,n,s;!t||t.abort?ui.auxeditor.close(t&&t.abort):ui.auxeditor.current!==t.key&&(ui.popupmgr.popups.applypreset.pop&&ui.popupmgr.popups.applypreset.close(),32<(a=ui.puzzle.painter.cw)&&(a=Math.floor(.75*a)),o=pzpr.util.getRect(d("divques")),ui.popupmgr.open("auxeditor",4,o.top),ui.auxeditor.puzzle||(n=document.getElementById("divauxeditor"),ui.auxeditor.puzzle=new pzpr.Puzzle(n,{type:"player",cellsize:a})),(s=ui.auxeditor.puzzle).open(t.pid+"/"+t.url,function(){ui.popupmgr.popups.auxeditor.titlebar.innerText=ui.selectStr(s.info.ja,s.info.en),ui.auxeditor.puzzle.setCanvasSizeByCellSize(a);var e=pzpr.util.getRect(d("popauxeditor"));ui.popupmgr.open("auxeditor",Math.max(4,o.left-e.width),e.top)}),ui.auxeditor.current=t.key,ui.auxeditor.cb=i,ui.menuconfig.set("auxeditor_inputmode","auto"))}},ui.popupmgr.addpopup("applypreset",{formname:"applypreset",reset:function(){this.loadpresets()},translate:function(){ui.popupmgr.popups.template.translate.call(this),ui.puzzle.klass.Bank.prototype.enabled&&this.loadpresets()},apply:function(){var e;""!==this.form.preset.value&&(e=ui.puzzle.board.bank.presets[+this.form.preset.value],ui.puzzle.board.bank.applyPreset(e)),this.close()},loadpresets:function(){for(var e=d("ap_preset"),t=(e.replaceChildren(),ui.puzzle.board.bank.presets),i=0;i<t.length;i++){var a=document.createElement("div"),o=document.createElement("label"),n=document.createElement("input");n.name="preset",n.value=i,n.type="radio",o.textContent=ui.i18n(t[i].name)||t[i].name,o.prepend(n),a.replaceChildren(o),e.appendChild(a)}}}),ui.network={ws:null,mode:"",key:"",maxSeen:-1,configure:function(e,t){this.mode=e,this.key=t,ui.setdisplay("network")},start:function(){var e,t;this.mode&&(e=window.location,t="ws://",t=(t="https:"===document.location.protocol?"wss://":t)+e.host+"/game/"+this.key,this.ws=new WebSocket(t),this.ws.onclose=this.onclose,this.ws.onmessage=this.onmessage)},onCellOp:function(e){this.ws&&this.ws.send(e)},onclose:function(e){ui.network.start()},onmessage:function(e){var e=JSON.parse(e.data),t=e.id;t>ui.network.maxSeen&&(ui.network.maxSeen=t,ui.network.applyOp(e.operation))},applyOp:function(e){var t=new ui.puzzle.klass.ObjectOperation;t.decode(e.split(",")),t.external=!0,ui.puzzle.opemgr.disableRecord(),t.redo(),ui.puzzle.opemgr.enableRecord(),ui.puzzle.opemgr.newOperation(),ui.puzzle.opemgr.add(t)}}}();
//# sourceMappingURL=pzpr-ui.js.map